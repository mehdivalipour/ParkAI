<!DOCTYPE html>
<html lang="fa" dir="rtl" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>دستیار هوشمند سازمانی</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Vazirmatn Font -->
    <link href="https://cdn.jsdelivr.net/gh/mohammadv184/Vazirmatn@33.003/Vazirmatn-font-face.css" rel="stylesheet" type="text/css" />

    <style>
        :root {
            --color-brand-primary: #1e3a8a; /* (blue-900) */
            --color-brand-highlight: #14b8a6; /* (teal-500) */
            --color-brand-dark: #1f2937; /* (gray-800) */
            --color-brand-light: #f9fafb; /* (gray-50) */
            --color-brand-card-light: #ffffff;
            --color-brand-card-dark: #1f2937; /* (gray-800) */
        }

        body, html {
            font-family: 'Vazirmatn', sans-serif;
            font-size: 14px; /* فشرده‌سازی فونت */
            line-height: 1.6;
            background-color: var(--color-brand-light);
            color: #111827; /* gray-900 */
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .dark body, .dark html {
            background-color: #000000;
            color: #d1d5db; /* gray-300 */
        }

        /* استایل‌های فشرده */
        .text-sm { font-size: 0.8rem; line-height: 1.4; }
        .text-xs { font-size: 0.7rem; line-height: 1.3; }
        .p-4 { padding: 1rem; }
        .p-3 { padding: 0.75rem; }
        .p-2 { padding: 0.5rem; }
        .space-y-4 > :not([hidden]) ~ :not([hidden]) { margin-top: 1rem; }
        .space-y-3 > :not([hidden]) ~ :not([hidden]) { margin-top: 0.75rem; }
        .gap-4 { gap: 1rem; }
        .gap-3 { gap: 0.75rem; }
        .gap-2 { gap: 0.5rem; }
        .gap-1 { gap: 0.25rem; }

        /* دکمه‌های سفارشی */
        .btn {
            padding: 0.5rem 1rem;
            border-radius: 8px; /* rounded-lg */
            transition: all 0.2s ease;
            font-size: 0.8rem;
            font-weight: 500;
            white-space: nowrap;
            cursor: pointer;
            border: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        .btn-primary {
            background-color: #111827; /* black */
            color: white;
        }
        .btn-primary:hover {
            background-color: #374151; /* gray-700 */
        }

        .btn-highlight {
            background-color: var(--color-brand-highlight);
            color: white;
        }
        .btn-highlight:hover {
            opacity: 0.85;
        }
        .btn-sm {
           padding: 0.35rem 0.8rem;
           font-size: 0.75rem;
        }
        .btn-xs {
           padding: 0.25rem 0.6rem;
           font-size: 0.7rem;
           border-radius: 6px; /* rounded-md */
        }

        /* دکمه فیلتر افقی */
        .filter-btn {
            padding: 0.25rem 0.75rem;
            border-radius: 6px;
            font-size: 0.75rem;
            background-color: transparent;
            color: #6b7280; /* gray-500 */
            transition: all 0.2s ease;
            border: 1px solid transparent;
        }
        .filter-btn:hover {
            background-color: #f3f4f6; /* gray-100 */
            border-color: #d1d5db; /* gray-300 */
        }
        .dark .filter-btn {
            color: #9ca3af; /* gray-400 */
        }
        .dark .filter-btn:hover {
            background-color: #374151; /* gray-700 */
            border-color: #4b5563; /* gray-600 */
        }
        .filter-btn.active {
            background-color: var(--color-brand-highlight);
            color: white;
            border-color: var(--color-brand-highlight);
        }
        .dark .filter-btn.active {
             background-color: var(--color-brand-highlight);
             color: white;
        }


        /* باکس پیشنهاد هوشمند */
        .ai-insight-box {
            background-color: #f0fdfa; /* teal-50 */
            border-right: 4px solid var(--color-brand-highlight);
            padding: 0.75rem;
            border-radius: 6px;
            border-top-right-radius: 0;
             border-bottom-right-radius: 0;
        }
        .dark .ai-insight-box {
            background-color: rgba(19, 78, 74, 0.5); /* teal-900 with opacity */
            border-color: var(--color-brand-highlight);
            color: #a7f3d0; /* teal-200 */
        }
        .dark .ai-insight-box p {
            color: #d1fae5; /* teal-100 */
        }
        .dark .ai-insight-box .font-semibold {
            color: #5eead4; /* teal-300 */
        }


        /* انیمیشن محو شدن */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in { animation: fadeIn 0.5s ease-out forwards; }

        /* استایل نمودارها */
        canvas { max-height: 220px; } /* فشرده‌تر */

        /* استایل منوی فعال سایدبار (مینیمال) */
        .sidebar-link {
             padding-right: 1rem;
             border-right: 3px solid transparent;
             transition: all 0.2s ease;
        }
        .sidebar-link.active {
            background-color: rgba(20, 184, 166, 0.05); /* very light teal */
            color: var(--color-brand-highlight);
            font-weight: 600; /* semi-bold */
            border-right-color: var(--color-brand-highlight);
        }
        .sidebar-link.active svg {
            color: var(--color-brand-highlight);
        }
        .dark .sidebar-link.active {
            background-color: rgba(20, 184, 166, 0.1);
        }
        .sidebar-link:not(.active):hover {
            background-color: #f3f4f6; /* gray-100 */
        }
        .dark .sidebar-link:not(.active):hover {
            background-color: #1f2937; /* gray-800 */
        }


        /* (اصلاح باگ Heatmap) */
        .heatmap-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 2px; /* کاهش فاصله */
        }
        .heatmap-cell {
            aspect-ratio: 1 / 1; /* اطمینان از مربعی بودن */
            border-radius: 1px; /* گردی کمتر */
            min-height: 10px; /* حداقل ارتفاع */
        }

        /* تقویم فشرده */
        .calendar-grid-dense {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 4px;
        }
        .calendar-cell {
            font-size: 10px;
            text-align: center;
            padding: 4px 0;
            border-radius: 4px;
        }
        .calendar-cell.today {
            background-color: var(--color-brand-highlight);
            color: white;
            font-weight: bold;
        }

        /* استایل پایه کارت‌ها */
        .card {
            background-color: var(--color-brand-card-light);
            border-radius: 8px; /* rounded-lg */
            border: 1px solid #e5e7eb; /* gray-200 */
            padding: 1rem; /* p-4 */
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        }
        .dark .card {
            background-color: var(--color-brand-card-dark);
            border-color: #374151; /* gray-700 */
        }

        /* بهبود ظاهر Input و Textarea */
        input[type="text"], input[type="password"], textarea, select {
             padding: 0.6rem 0.75rem;
             font-size: 0.8rem;
             border-radius: 6px; /* rounded-md */
             border: 1px solid #d1d5db; /* gray-300 */
             background-color: #f9fafb; /* gray-50 */
             color: #1f2937; /* gray-800 */
             transition: border-color 0.2s ease, box-shadow 0.2s ease;
        }
        input[type="text"]:focus, input[type="password"]:focus, textarea:focus, select:focus {
             outline: none;
             border-color: var(--color-brand-highlight);
             box-shadow: 0 0 0 2px rgba(20, 184, 166, 0.3);
        }
        .dark input[type="text"], .dark input[type="password"], .dark textarea, .dark select {
             background-color: #1f2937; /* gray-800 */
             border-color: #4b5563; /* gray-600 */
             color: #d1d5db; /* gray-300 */
        }
        .dark input[type="text"]:focus, .dark input[type="password"]:focus, .dark textarea:focus, .dark select:focus {
            border-color: var(--color-brand-highlight);
            box-shadow: 0 0 0 2px rgba(20, 184, 166, 0.4);
        }
        ::placeholder {
             color: #9ca3af; /* gray-400 */
             opacity: 1;
        }
        .dark ::placeholder {
            color: #6b7280; /* gray-500 */
        }


        /* اسکرول‌بار سفارشی برای سازگاری بهتر */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }
        ::-webkit-scrollbar-track {
            background: transparent;
        }
        ::-webkit-scrollbar-thumb {
            background: #d1d5db; /* gray-300 */
            border-radius: 3px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #9ca3af; /* gray-400 */
        }
        .dark ::-webkit-scrollbar-thumb {
            background: #4b5563; /* gray-600 */
        }
        .dark ::-webkit-scrollbar-thumb:hover {
            background: #6b7280; /* gray-500 */
        }

    </style>

</head>
<body class="text-sm">

    <!-- 1. صفحه ورود -->
    <div id="loginView" class="flex items-center justify-center min-h-screen bg-brand-light dark:bg-black p-4 fade-in">
        <div class="w-full max-w-sm mx-auto overflow-hidden bg-white dark:bg-gray-900 rounded-lg shadow-xl border border-gray-200 dark:border-gray-800">
            <div class="p-6">
                <div class="flex flex-col items-center">
                    <svg class="h-10 w-10 text-brand-highlight" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 17.25v1.007a3 3 0 01-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0115 18.257V17.25m6-12V15a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 15V5.25m18 0A2.25 2.25 0 0018.75 3H5.25A2.25 2.25 0 003 5.25m18 0V12a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 12V5.25" />
                    </svg>
                    <h2 class="text-lg font-bold text-gray-900 dark:text-white mt-2">دستیار هوشمند سازمانی</h2>
                    <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">ورود به پنل کاربری</p>
                </div>

                <form class="mt-6" onsubmit="event.preventDefault();">
                    <div class="mb-4">
                        <label for="username" class="block text-xs font-medium text-gray-600 dark:text-gray-300 mb-2">نام کاربری</label>
                        <input type="text" id="username" class="w-full" value="admin_user" placeholder="نام کاربری">
                    </div>
                    <div class="mb-4">
                        <label for="password" class="block text-xs font-medium text-gray-600 dark:text-gray-300 mb-2">رمز عبور</label>
                        <input type="password" id="password" class="w-full" value="••••••••" placeholder="رمز عبور">
                    </div>

                    <p class="text-xs font-medium text-gray-600 dark:text-gray-300 mb-2">انتخاب نقش:</p>
                    <div class="grid grid-cols-2 gap-3">
                        <button type="button" id="loginAdmin" data-role="admin" class="role-select-btn flex items-center justify-center p-3 text-sm font-semibold text-center text-gray-700 dark:text-gray-200 bg-gray-50 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg hover:border-brand-highlight hover:text-brand-highlight dark:hover:border-brand-highlight transition-all">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-2" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg>
                            من مدیر هستم
                        </button>
                        <button type="button" id="loginEmployee" data-role="employee" class="role-select-btn flex items-center justify-center p-3 text-sm font-semibold text-center text-gray-700 dark:text-gray-200 bg-gray-50 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg hover:border-brand-highlight hover:text-brand-highlight dark:hover:border-brand-highlight transition-all">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-2" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" /></svg>
                            من کارمند هستم
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- 2. اپلیکیشن اصلی (پس از ورود) -->
    <div id="mainAppView" class="hidden h-screen w-full md:flex">

        <!-- سایدبار (منوی کناری راست) -->
        <aside class="flex-shrink-0 w-60 bg-white dark:bg-gray-900 border-l border-gray-200 dark:border-gray-800 flex flex-col">
            <!-- لوگو و عنوان -->
            <div class="flex items-center justify-start h-16 px-4 border-b border-gray-200 dark:border-gray-800 flex-shrink-0">
                <svg class="h-8 w-8 text-brand-highlight" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M9 17.25v1.007a3 3 0 01-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0115 18.257V17.25m6-12V15a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 15V5.25m18 0A2.25 2.25 0 0018.75 3H5.25A2.25 2.25 0 003 5.25m18 0V12a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 12V5.25" />
                </svg>
                <span class="mr-2 text-sm font-bold text-gray-900 dark:text-white">دستیار هوشمند</span>
            </div>

            <!-- لیست منوها -->
            <nav id="sidebarNav" class="flex-1 overflow-y-auto py-4 space-y-1">
                <p class="px-4 text-xs font-semibold text-gray-400 uppercase tracking-wider">اصلی</p>
                <a href="#" class="sidebar-link active flex items-center px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-300" data-target="dashboardContent">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-3" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" /></svg>
                    داشبورد
                </a>
                <a href="#" class="sidebar-link flex items-center px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-300" data-target="reportsContent">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-3" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2z" /></svg>
                    گزارش‌ها
                </a>
                <a href="#" class="sidebar-link flex items-center px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-300" data-target="goalsContent">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-3" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" /></svg>
                    اهداف و عملکرد
                </a>

                <p class="px-4 pt-4 text-xs font-semibold text-gray-400 uppercase tracking-wider">مدیریت</p>
                <a href="#" class="sidebar-link flex items-center px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-300 admin-only" data-target="teamContent">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-3" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" /></svg>
                    مدیریت تیم
                </a>
                <a href="#" class="sidebar-link flex items-center px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-300" data-target="projectsContent">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-3" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z" /></svg>
                    پروژه‌ها
                </a>
                <a href="#" class="sidebar-link flex items-center px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-300" data-target="contractsContent">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-3" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /></svg>
                    قراردادها
                </a>

                <p class="px-4 pt-4 text-xs font-semibold text-gray-400 uppercase tracking-wider">هوش مصنوعی</p>
                <a href="#" class="sidebar-link flex items-center px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-300" data-target="chatContent">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-3" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" /></svg>
                    چت هوشمند
                </a>
                <a href="#" class="sidebar-link flex items-center px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-300" data-target="trainingContent">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-3" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" /></svg>
                    آموزش هوشمند
                </a>

                <!-- ماژول‌های تخصصی -->
                <p class="px-4 pt-4 text-xs font-semibold text-gray-400 uppercase tracking-wider">ماژول‌های تخصصی</p>
                <div class="space-y-1 max-h-40 overflow-y-auto pr-1">
                    <a href="#" class="sidebar-link flex items-center px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-300" data-target="letterMakerContent">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-3 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10" /></svg>
                        نامه‌ساز هوشمند
                    </a>
                    <a href="#" class="sidebar-link flex items-center px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-300" data-target="proposalMakerContent">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-3 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m3.75 9v6m-3-3h6M12 15v6m-6-6v6m0-6H5.25A2.25 2.25 0 013 12.75V5.25A2.25 2.25 0 015.25 3h4.5A2.25 2.25 0 0112 5.25v2.25" /></svg>
                        پروپوزال‌ساز
                    </a>
                    <a href="#" class="sidebar-link flex items-center px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-300 admin-only" data-target="productivityView">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-3 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 010 3.75H5.625a1.875 1.875 0 010-3.75z" /></svg>
                        تحلیل بهره‌وری
                    </a>
                    <a href="#" class="sidebar-link flex items-center px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-300" data-target="roadmapView">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-3 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6.75 7.5l3 2.25-3 2.25m4.5 0h3m-9 8.25h13.5A2.25 2.25 0 0021 18V6a2.25 2.25 0 00-2.25-2.25H5.25A2.25 2.25 0 003 6v12a2.25 2.25 0 002.25 2.25z" /></svg>
                        نقشه‌راه
                    </a>
                    <a href="#" class="sidebar-link flex items-center px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-300 admin-only" data-target="processView">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-3 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M10.5 6h9.75M10.5 6a1.5 1.5 0 11-3 0m3 0a1.5 1.5 0 10-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0M3.75 18H7.5m3-6h9.75m-9.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0M3.75 12H7.5" /></svg>
                        بهینه‌سازی فرآیند
                    </a>
                    <a href="#" class="sidebar-link flex items-center px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-300" data-target="messageMakerView">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-3 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-2.138a.5.5 0 01.865-.501 48.172 48.172 0 003.423-.379C19.877 17.754 21 16.31 21 14.71v-5.592A2.25 2.25 0 0018.75 6.75H5.25A2.25 2.25 0 003 9.118v5.592z" /></svg>
                        پیام‌ساز هوشمند
                    </a>
                    <a href="#" class="sidebar-link flex items-center px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-300" data-target="translateView">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-3 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M10.5 21l5.25-11.25L21 21m-9-3h7.5M3 5.621a48.474 48.474 0 016-.371m0 0c1.12 0 2.233.038 3.334.114M9 5.25V3m3.334 2.364C11.176 10.658 7.69 15.08 3 17.502m9.334-12.138c.896.061 1.785.147 2.666.257m-4.589 8.495a18.023 18.023 0 01-3.827-5.802" /></svg>
                        ترجمه هوشمند
                    </a>
                    <a href="#" class="sidebar-link flex items-center px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-300" data-target="teamChatView">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-3 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
                        چت سازمانی
                    </a>
                </div>

                <p class="px-4 pt-4 text-xs font-semibold text-gray-400 uppercase tracking-wider">سیستم</p>
                <a href="#" class="sidebar-link flex items-center px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-300" data-target="settingsContent">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-3" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.096 2.572-1.065z" /><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
                    تنظیمات
                </a>
                <a href="#" class="sidebar-link flex items-center px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-300" data-target="supportView">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-3" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z" /></svg>
                    پشتیبانی
                </a>
            </nav>

            <!-- پروفایل و خروج -->
            <div class="flex items-center p-3 border-t border-gray-200 dark:border-gray-800 flex-shrink-0">
                <img id="profileImg" class="h-9 w-9 rounded-lg object-cover flex-shrink-0" src="https://placehold.co/100x100/14b8a6/white?text=A" alt="پروفایل">
                <div class="mr-3 flex-1 min-w-0"> <!-- Added min-w-0 for better truncation -->
                    <p id="profileName" class="text-sm font-semibold text-gray-800 dark:text-white truncate">بارگذاری...</p>
                    <p id="profileRole" class="text-xs text-gray-500 dark:text-gray-400 truncate">...</p>
                </div>
                <!-- دکمه پروفایل -->
                <button type="button" data-target="profileView" class="sidebar-link flex-shrink-0 p-2 ml-1 rounded-lg text-gray-500 hover:bg-gray-100 hover:text-gray-800 dark:hover:bg-gray-800 dark:hover:text-gray-200 transition-colors" title="پروفایل">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 6h9.75M10.5 6a1.5 1.5 0 11-3 0m3 0a1.5 1.5 0 10-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0M3.75 18H7.5m3-6h9.75m-9.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0M3.75 12H7.5" />
                    </svg>
                </button>
                <!-- دکمه خروج -->
                <button type="button" id="logoutButton" class="flex-shrink-0 p-2 ml-1 rounded-lg text-gray-500 hover:bg-red-100 hover:text-red-600 dark:hover:bg-gray-800 dark:hover:text-red-400 transition-colors" title="خروج">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M15.75 9l-2.25-2.25m0 0l-2.25 2.25m2.25-2.25v7.5M21 12h-6.375" />
                    </svg>
                </button>
            </div>
        </aside>

        <!-- محتوای اصلی (ناحیه قابل اسکرول) -->
        <main class="flex-1 overflow-y-auto p-4 md:p-6 bg-brand-light dark:bg-black transition-colors duration-300">

            <!-- هدر اصلی (Top Bar) - آپدیت شده -->
            <header class="flex flex-col md:flex-row justify-between md:items-center mb-4 gap-3">
                <div class="min-w-0"> <!-- Added min-w-0 -->
                     <p id="welcomeMessage" class="text-sm font-medium text-gray-600 dark:text-gray-400 truncate">در حال بارگذاری...</p>
                     <h2 id="pageTitle" class="text-xl font-bold text-gray-900 dark:text-white truncate">داشبورد</h2>
                </div>

                <!-- بخش جدید: وضعیت امروز -->
                <div class="flex-shrink-0 flex items-center gap-3 p-2.5 card"> <!-- Use card class -->
                    <div class="text-center border-l border-gray-200 dark:border-gray-700 pl-3">
                        <span class="text-xs text-gray-500 dark:text-gray-400">بهره‌وری امروز</span>
                        <p class="text-sm font-bold text-green-500">۸۷٪</p>
                    </div>
                    <div class="text-center">
                        <span id="headerDate" class="text-sm font-semibold text-gray-700 dark:text-gray-300">...</span>
                        <p id="headerTime" class="text-xs text-gray-500 dark:text-gray-400">...</p>
                    </div>
                </div>

                <div class="flex items-center gap-2">
                    <!-- نوار فرمان هوشمند (Copilot-Style) -->
                    <div class="relative w-full md:w-64">
                        <input type="text" placeholder="از هوش مصنوعی بپرسید..." class="w-full text-xs p-2 pr-8 card focus:outline-none focus:ring-1 focus:ring-brand-highlight !border-gray-200 dark:!border-gray-800"> <!-- Use card style -->
                        <svg class="absolute h-4 w-4 right-2 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z" /></svg>
                    </div>

                    <!-- اعلان‌ها -->
                    <button type="button" class="p-2 rounded-lg card text-gray-500 dark:text-gray-400 hover:text-brand-highlight dark:hover:text-brand-highlight">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" /></svg>
                    </button>
                    <!-- تغییر تم -->
                    <button type="button" id="theme-toggle" class="p-2 rounded-lg card text-gray-500 dark:text-gray-400 hover:text-brand-highlight dark:hover:text-brand-highlight">
                        <svg id="theme-toggle-dark-icon" class="h-4 w-4 hidden" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg>
                        <svg id="theme-toggle-light-icon" class="h-4 w-4 hidden" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm0 13a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zm8-5a1 1 0 01-1 1h-1a1 1 0 110-2h1a1 1 0 011 1zM3 10a1 1 0 01-1 1H1a1 1 0 110-2h1a1 1 0 011 1zM16 16a1 1 0 01-1-1v-1a1 1 0 112 0v1a1 1 0 01-1 1zM5 4a1 1 0 01-1-1V2a1 1 0 112 0v1a1 1 0 01-1 1zM16 4a1 1 0 01-1-1V2a1 1 0 112 0v1a1 1 0 01-1 1zM5 16a1 1 0 01-1-1v-1a1 1 0 112 0v1a1 1 0 01-1 1zM10 7a3 3 0 100 6 3 3 0 000-6z"></path></svg>
                    </button>
                    <!-- دکمه دستیار صوتی -->
                    <button type="button" class="p-2 rounded-lg bg-brand-highlight text-white hover:opacity-85">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z" />
                        </svg>
                    </button>
                </div>
            </header>

            <!-- =============================== -->
            <!-- محفظه محتوای صفحات (Views) -->
            <!-- =============================== -->
            <div id="pageContentContainer" class="space-y-5">

                <!-- 1. محتوای داشبورد (اصلی) -->
                <div id="dashboardContent" class="page-view space-y-5">

                    <!-- ################################################## -->
                    <!--         شروع بازطراحی داشبورد مدیر ارشد         -->
                    <!-- ################################################## -->
                    <div class="admin-view space-y-4">

                        <!-- بخش 1: کارت‌های KPI (فشرده) -->
                        <div class="grid grid-cols-2 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 xl:grid-cols-11 gap-3">
                            <!-- 1. بهره‌وری کل -->
                            <div class="card p-3 fade-in text-center">
                                <h5 class="text-xs text-gray-500 dark:text-gray-400 truncate">بهره‌وری کل</h5>
                                <p class="text-2xl font-bold text-green-500 mt-1">۸۷٪</p>
                            </div>
                            <!-- 2. پروژه‌های فعال -->
                            <div class="card p-3 fade-in text-center">
                                <h5 class="text-xs text-gray-500 dark:text-gray-400 truncate">پروژه‌های فعال</h5>
                                <p class="text-2xl font-bold text-blue-500 mt-1">۱۲</p>
                            </div>
                            <!-- 3. کارمندان فعال -->
                            <div class="card p-3 fade-in text-center">
                                <h5 class="text-xs text-gray-500 dark:text-gray-400 truncate">کارمندان فعال</h5>
                                <p class="text-2xl font-bold text-gray-800 dark:text-white mt-1">۴۵</p>
                            </div>
                            <!-- 4. ساعات مفید -->
                            <div class="card p-3 fade-in text-center">
                                <h5 class="text-xs text-gray-500 dark:text-gray-400 truncate">ساعات مفید</h5>
                                <p class="text-2xl font-bold text-gray-800 dark:text-white mt-1">۶:۱۵</p>
                            </div>
                            <!-- 5. تحقق اهداف -->
                            <div class="card p-3 fade-in text-center">
                                <h5 class="text-xs text-gray-500 dark:text-gray-400 truncate">تحقق اهداف</h5>
                                <p class="text-2xl font-bold text-brand-highlight mt-1">۶۸٪</p>
                            </div>
                            <!-- 6. قراردادها -->
                            <div class="card p-3 fade-in text-center">
                                <h5 class="text-xs text-gray-500 dark:text-gray-400 truncate">قراردادها</h5>
                                <p class="text-2xl font-bold text-yellow-500 mt-1">۳</p>
                            </div>
                            <!-- 7. رضایت (AI) -->
                            <div class="card p-3 fade-in text-center">
                                <h5 class="text-xs text-gray-500 dark:text-gray-400 truncate">رضایت (AI)</h5>
                                <p class="text-2xl font-bold text-gray-800 dark:text-white mt-1">۹.۱</p>
                            </div>
                            <!-- 8. تسک‌های عقب‌افتاده -->
                            <div class="card p-3 fade-in text-center">
                                <h5 class="text-xs text-gray-500 dark:text-gray-400 truncate">تسک معوق</h5>
                                <p class="text-2xl font-bold text-red-500 mt-1">۵</p>
                            </div>
                            <!-- 9. دوره‌های فعال -->
                            <div class="card p-3 fade-in text-center">
                                <h5 class="text-xs text-gray-500 dark:text-gray-400 truncate">دوره‌های فعال</h5>
                                <p class="text-2xl font-bold text-gray-800 dark:text-white mt-1">۴</p>
                            </div>
                            <!-- 10. جلسات امروز -->
                            <div class="card p-3 fade-in text-center">
                                <h5 class="text-xs text-gray-500 dark:text-gray-400 truncate">جلسات امروز</h5>
                                <p class="text-2xl font-bold text-gray-800 dark:text-white mt-1">۲</p>
                            </div>
                            <!-- 11. پیشنهاد AI -->
                            <div class="bg-teal-50 dark:bg-teal-900/50 p-3 rounded-lg border border-teal-500 fade-in flex flex-col justify-center text-center">
                                <h5 class="text-xs text-teal-700 dark:text-teal-300">پیشنهاد AI</h5>
                                <p class="text-xs font-semibold text-teal-800 dark:text-teal-200 leading-tight mt-1">تمرکز بر پروژه آذرنو</p>
                            </div>
                        </div>

                        <!-- بخش 2, 3, 4, 5, 6: گرید 4 ستونه -->
                        <div class="grid grid-cols-1 lg:grid-cols-4 gap-4">

                            <!-- ستون 1 (اصلی - Span 3) -->
                            <div class="lg:col-span-3 space-y-4">

                                <!-- ردیف اول ستون اصلی (نمودارهای بزرگ) -->
                                <div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
                                    <!-- نمودار خطی بهره‌وری -->
                                    <div class="lg:col-span-2 card">
                                        <div class="flex justify-between items-center mb-2">
                                            <h3 class="font-semibold text-sm">نمودار خطی بهره‌وری</h3>
                                            <div class="flex gap-1">
                                                <button type="button" class="filter-btn text-xs active">روزانه</button>
                                                <button type="button" class="filter-btn text-xs">ماهانه</button>
                                            </div>
                                        </div>
                                        <canvas id="adminTrendChart" style="max-height: 200px;"></canvas>
                                    </div>
                                    <!-- نمودار دایره‌ای قراردادها -->
                                    <div class="card">
                                        <h3 class="font-semibold text-sm mb-2">وضعیت قراردادها</h3>
                                        <canvas id="adminContractsChart" style="max-height: 200px;"></canvas> <!-- Canvas جدید -->
                                    </div>
                                </div>

                                <!-- ردیف دوم ستون اصلی (Heatmap و Radar) -->
                                <div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
                                    <div class="lg:col-span-2 card">
                                        <h3 class="font-semibold text-sm mb-2">Heatmap بهره‌وری واحدها</h3>
                                        <!-- شبیه‌سازی Heatmap (اصلاح شده) -->
                                        <div class="heatmap-grid">
                                            <!-- شنبه تا جمعه (7 ستون) برای 5 تیم (5 ردیف) -->
                                            <div class="heatmap-cell bg-teal-100 dark:bg-teal-900"></div><div class="heatmap-cell bg-teal-300 dark:bg-teal-700"></div><div class="heatmap-cell bg-teal-500 dark:bg-teal-500"></div><div class="heatmap-cell bg-teal-400 dark:bg-teal-600"></div><div class="heatmap-cell bg-teal-200 dark:bg-teal-800"></div><div class="heatmap-cell bg-gray-200 dark:bg-gray-700"></div><div class="heatmap-cell bg-gray-200 dark:bg-gray-700"></div>
                                            <div class="heatmap-cell bg-teal-200 dark:bg-teal-800"></div><div class="heatmap-cell bg-teal-500 dark:bg-teal-500"></div><div class="heatmap-cell bg-teal-600 dark:bg-teal-400"></div><div class="heatmap-cell bg-teal-500 dark:bg-teal-500"></div><div class="heatmap-cell bg-teal-300 dark:bg-teal-700"></div><div class="heatmap-cell bg-gray-200 dark:bg-gray-700"></div><div class="heatmap-cell bg-gray-200 dark:bg-gray-700"></div>
                                            <div class="heatmap-cell bg-teal-300 dark:bg-teal-700"></div><div class="heatmap-cell bg-teal-600 dark:bg-teal-400"></div><div class="heatmap-cell bg-teal-700 dark:bg-teal-300"></div><div class="heatmap-cell bg-teal-600 dark:bg-teal-400"></div><div class="heatmap-cell bg-teal-400 dark:bg-teal-600"></div><div class="heatmap-cell bg-gray-200 dark:bg-gray-700"></div><div class="heatmap-cell bg-gray-200 dark:bg-gray-700"></div>
                                            <div class="heatmap-cell bg-teal-100 dark:bg-teal-900"></div><div class="heatmap-cell bg-teal-200 dark:bg-teal-800"></div><div class="heatmap-cell bg-teal-400 dark:bg-teal-600"></div><div class="heatmap-cell bg-teal-300 dark:bg-teal-700"></div><div class="heatmap-cell bg-teal-200 dark:bg-teal-800"></div><div class="heatmap-cell bg-gray-200 dark:bg-gray-700"></div><div class="heatmap-cell bg-gray-200 dark:bg-gray-700"></div>
                                            <div class="heatmap-cell bg-teal-500 dark:bg-teal-500"></div><div class="heatmap-cell bg-teal-600 dark:bg-teal-400"></div><div class="heatmap-cell bg-teal-700 dark:bg-teal-300"></div><div class="heatmap-cell bg-teal-500 dark:bg-teal-500"></div><div class="heatmap-cell bg-teal-300 dark:bg-teal-700"></div><div class="heatmap-cell bg-gray-200 dark:bg-gray-700"></div><div class="heatmap-cell bg-gray-200 dark:bg-gray-700"></div>
                                        </div>
                                    </div>
                                    <div class="card">
                                        <h3 class="font-semibold text-sm mb-2">مقایسه ۳ تیم برتر</h3>
                                        <canvas id="adminRadarChart" style="max-height: 180px;"></canvas> <!-- Canvas جدید -->
                                    </div>
                                </div>

                                <!-- ردیف سوم ستون اصلی (Gantt) -->
                                <div class="card">
                                    <h3 class="font-semibold text-sm mb-2">نمودار گانت پروژه‌ها</h3>
                                    <canvas id="adminGanttChart" style="max-height: 150px;"></canvas> <!-- Canvas جدید -->
                                </div>

                                <!-- ردیف چهارم (بخش 3: پروژه‌ها و تیم‌ها) -->
                                <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
                                    <!-- لیست پروژه‌ها -->
                                    <div class="card">
                                        <h3 class="font-semibold text-sm mb-3">لیست پروژه‌های فعال</h3>
                                        <div class="space-y-3">
                                            <!-- Project 1 -->
                                            <div class="relative">
                                                <div class="flex justify-between items-center mb-1">
                                                    <span class="font-semibold text-sm text-green-600 dark:text-green-400">🟩 پروژه آذرنو</span>
                                                    <span class="text-xs text-gray-500 dark:text-gray-400">تیم فناوری</span>
                                                </div>
                                                <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5"><div class="bg-green-500 h-1.5 rounded-full" style="width: 80%"></div></div>
                                            </div>
                                            <!-- Project 2 -->
                                            <div class="relative">
                                                <div class="flex justify-between items-center mb-1">
                                                    <span class="font-semibold text-sm text-yellow-600 dark:text-yellow-400">🟧 پروژه ابرینو</span>
                                                    <span class="text-xs text-gray-500 dark:text-gray-400">تیم طراحی</span>
                                                </div>
                                                <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5"><div class="bg-yellow-500 h-1.5 rounded-full" style="width: 50%"></div></div>
                                            </div>
                                            <!-- Project 3 -->
                                            <div class="relative">
                                                <div class="flex justify-between items-center mb-1">
                                                    <span class="font-semibold text-sm text-red-600 dark:text-red-400">🟥 بهینه‌سازی فروش</span>
                                                    <span class="text-xs text-gray-500 dark:text-gray-400">تیم فروش</span>
                                                </div>
                                                <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5"><div class="bg-red-500 h-1.5 rounded-full" style="width: 20%"></div></div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- جدول فشرده تیم‌ها -->
                                    <div class="card">
                                        <h3 class="font-semibold text-sm mb-3">جدول فشرده عملکرد تیم‌ها</h3>
                                        <table class="w-full text-xs text-right">
                                            <thead>
                                                <tr class="border-b border-gray-200 dark:border-gray-700">
                                                    <th class="pb-2 font-medium text-gray-500 dark:text-gray-400">تیم</th>
                                                    <th class="pb-2 font-medium text-gray-500 dark:text-gray-400">بهره‌وری</th>
                                                    <th class="pb-2 font-medium text-gray-500 dark:text-gray-400">تسک معوق</th>
                                                    <th class="pb-2 font-medium text-gray-500 dark:text-gray-400">وضعیت</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr><td class="pt-2 font-semibold">فناوری</td><td class="pt-2 font-semibold text-green-500">۹۲٪</td><td class="pt-2">۲</td><td class="pt-2 text-green-500">عالی</td></tr>
                                                <tr><td class="pt-2 font-semibold">طراحی</td><td class="pt-2 font-semibold text-yellow-500">۷۸٪</td><td class="pt-2">۳</td><td class="pt-2 text-yellow-500">متوسط</td></tr>
                                                <tr><td class="pt-2 font-semibold">فروش</td><td class="pt-2 font-semibold text-red-500">۶۵٪</td><td class="pt-2">۵</td><td class="pt-2 text-red-500">بررسی</td></tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                                <!-- ردیف پنجم (بخش 6: خلاصه روز AI) -->
                                <div class="ai-insight-box card !p-4 fade-in !border-t-4 !border-r-0 !rounded-lg">
                                    <h3 class="font-semibold text-sm mb-2 text-brand-highlight">خلاصه‌ی امروز توسط هوش مصنوعی</h3>
                                    <p class="text-sm text-gray-800 dark:text-gray-200 leading-relaxed">
                                        📅 امروز ۵ پروژه در حال اجراست، تیم پشتیبانی نیاز به بازبینی دارد، و بهره‌وری کلی سازمان نسبت به دیروز ۴٪ کاهش یافته است.
                                        پیشنهاد می‌شود تا عصر جلسه کوتاه انگیزشی برگزار شود.
                                    </p>
                                    <div class="flex gap-2 mt-4">
                                        <button type="button" class="btn btn-highlight btn-xs">✅ بله، متن جلسه را بساز</button>
                                        <button type="button" class="btn btn-primary btn-xs">📊 خلاصه تحلیلی بیشتر</button>
                                    </div>
                                </div>

                            </div> <!-- انتهای ستون اصلی (lg:col-span-3) -->

                            <!-- ستون 2 (سایدبار راست داخلی - Span 1) -->
                            <div class="lg:col-span-1 space-y-4">

                                <!-- بخش جدید: پیام‌ها (بر اساس درخواست کاربر) -->
                                <div class="card">
                                    <h3 class="font-semibold text-sm mb-3">پیام‌ها</h3>
                                    <!-- جستجو -->
                                    <input type="text" placeholder="جستجوی همکار..." class="w-full text-xs p-2 mb-3">
                                    <!-- لیست پیام‌ها -->
                                    <div class="space-y-2 max-h-[300px] overflow-y-auto pr-1">
                                        <!-- Contact 1 (Active) -->
                                        <div class="flex items-center p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer">
                                            <img class="h-9 w-9 rounded-lg flex-shrink-0" src="https://placehold.co/100x100/3b82f6/white?text=R" alt="">
                                            <div class="mr-3 flex-1 min-w-0">
                                                <p class="text-sm font-semibold truncate">آقای رضایی (مدیر)</p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400 truncate">متشکرم، لطفا گزارش را ارسال کنید...</p>
                                            </div>
                                            <span class="text-xs text-white bg-brand-highlight rounded-full w-5 h-5 flex items-center justify-center flex-shrink-0">۲</span>
                                        </div>
                                        <!-- Contact 2 -->
                                        <div class="flex items-center p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer">
                                            <img class="h-9 w-9 rounded-lg flex-shrink-0" src="https://placehold.co/100x100/ec4899/white?text=A" alt="">
                                            <div class="mr-3 flex-1 min-w-0">
                                                <p class="text-sm font-semibold truncate">خانم احمدی</p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400 truncate">جلسه فردا ساعت ۱۰ تنظیم شد.</p>
                                            </div>
                                        </div>
                                        <!-- Contact 3 -->
                                        <div class="flex items-center p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer">
                                            <span class="flex items-center justify-center h-9 w-9 rounded-lg bg-teal-100 dark:bg-teal-900 text-teal-600 dark:text-teal-300 font-bold text-sm flex-shrink-0">گروه</span>
                                            <div class="mr-3 flex-1 min-w-0">
                                                <p class="text-sm font-semibold truncate">گروه پروژه آذرنو</p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400 truncate">فایل نهایی بارگذاری شد.</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- بخش 4: دستیار هوش مصنوعی -->
                                <div class="card">
                                    <h3 class="font-semibold text-sm mb-3 text-brand-highlight">دستیار هوشمند مدیریتی</h3>
                                    <div class="space-y-3 max-h-[350px] overflow-y-auto pr-1">
                                        <!-- AI Card 1 -->
                                        <div class="ai-insight-box text-xs !p-3">
                                            <p class="font-semibold text-gray-800 dark:text-gray-200">گزارش هوش مصنوعی:</p>
                                            <p class="mt-1">بهره‌وری تیم طراحی ۱۲٪ کاهش یافته. پیشنهاد جلسه بازبینی. آیا مایلید متن سخنرانی جلسه را آماده کنم؟</p>
                                            <button type="button" class="btn btn-highlight btn-xs w-full mt-2">بله، آماده کن</button>
                                        </div>
                                        <!-- AI Card 2 -->
                                        <div class="ai-insight-box text-xs !p-3">
                                            <p class="font-semibold text-gray-800 dark:text-gray-200">پیشنهاد تصمیم:</p>
                                            <p class="mt-1">پروژه‌ی «آذرنو» در مرحله حساس است. پیشنهاد تخصیص ۲ نیروی جدید از تیم توسعه.</p>
                                            <button type="button" class="btn btn-primary btn-xs w-full mt-2">درخواست انتقال نیرو</button>
                                        </div>
                                        <!-- AI Card 3 -->
                                        <div class="ai-insight-box text-xs !p-3">
                                            <p class="font-semibold text-gray-800 dark:text-gray-200">تحلیل رفتاری:</p>
                                            <p class="mt-1">کارمندان پشتیبانی در بازه‌ی ۱۴ تا ۱۶ عملکرد بالاتری دارند. جلسات آموزشی در صبح برگزار شود.</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- نمودار میله‌ای عملکرد تیم‌ها (کوچک) -->
                                <div class="card">
                                    <h3 class="font-semibold text-sm mb-2">عملکرد تیم‌ها</h3>
                                    <canvas id="adminTeamPerfChart" style="max-height: 160px;"></canvas> <!-- Canvas جدید -->
                                </div>

                                <!-- نمودار پیشرفت اهداف کلان (کوچک) -->
                                <div class="card">
                                    <h3 class="font-semibold text-sm mb-2">پیشرفت اهداف کلان</h3>
                                    <div class="grid grid-cols-2 gap-2 mt-4">
                                        <canvas id="adminGoalsProgressChart" style="max-height: 80px;"></canvas>
                                        <canvas id="adminTrainingProgressChart" style="max-height: 80px;"></canvas>
                                    </div>
                                </div>

                                <!-- بخش 5: تقویم -->
                                <div class="card">
                                    <h3 class="font-semibold text-sm mb-3">تقویم و جلسات (شبیه‌سازی)</h3>
                                    <div class="calendar-grid-dense text-gray-700 dark:text-gray-300">
                                        <span>ش</span><span>ی</span><span>د</span><span>س</span><span>چ</span><span>پ</span><span>ج</span>
                                        <span class="calendar-cell"></span><span class="calendar-cell">۱</span><span class="calendar-cell">۲</span><span class="calendar-cell">۳</span><span class="calendar-cell">۴</span><span class="calendar-cell">۵</span><span class="calendar-cell">۶</span>
                                        <span class="calendar-cell">۷</span><span class="calendar-cell">۸</span><span class="calendar-cell">۹</span><span class="calendar-cell today">۱۰</span><span class="calendar-cell">۱۱</span><span class="calendar-cell">۱۲</span><span class="calendar-cell">۱۳</span>
                                        <span class="calendar-cell">۱۴</span><span class="calendar-cell">۱۵</span><span class="calendar-cell">۱۶</span><span class="calendar-cell">۱۷</span><span class="calendar-cell">۱۸</span><span class="calendar-cell">۱۹</span><span class="calendar-cell">۲۰</span>
                                    </div>
                                    <div class="ai-insight-box text-xs mt-3 !p-2">
                                        <p>یادآور هوشمند: ساعت ۱۵ جلسه با تیم فناوری دارید. می‌خواهید دستور جلسه را بنویسم؟</p>
                                    </div>
                                </div>

                            </div> <!-- انتهای سایدبار راست داخلی (lg:col-span-1) -->

                        </div> <!-- انتهای گرید 4 ستونه -->
                    </div>
                    <!-- ################################################## -->
                    <!--         پایان بازطراحی داشبورد مدیر ارشد         -->
                    <!-- ################################################## -->


                    <!-- Employee Dashboard View (داشبورد کارمند) -->
                    <div class="employee-view space-y-5">
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <!-- ستون اصلی کارمند -->
                            <div class="md:col-span-2 space-y-4">
                                <!-- لیست تسک‌ها -->
                                <div class="card">
                                    <h3 class="font-semibold mb-3">تسک‌های امروز شما</h3>
                                    <div class="space-y-3">
                                        <div class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg">
                                            <div>
                                                <p class="font-medium text-gray-800 dark:text-gray-100">ارسال گزارش عملکرد روزانه</p>
                                                <span class="text-xs text-gray-500 dark:text-gray-400">پروژه: داخلی</span>
                                            </div>
                                            <span class="text-xs font-semibold px-2 py-0.5 bg-green-100 text-green-700 dark:bg-green-800 dark:text-green-200 rounded-full">انجام شد</span>
                                        </div>
                                        <div class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg">
                                            <div>
                                                <p class="font-medium text-gray-800 dark:text-gray-100">آپلود مستندات پروژه آذرنو</p>
                                                <span class="text-xs text-gray-500 dark:text-gray-400">مهلت: امروز</span>
                                            </div>
                                            <span class="text-xs font-semibold px-2 py-0.5 bg-red-100 text-red-700 dark:bg-red-800 dark:text-red-200 rounded-full">فوریت</span>
                                        </div>
                                        <div class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg">
                                            <div>
                                                <p class="font-medium text-gray-800 dark:text-gray-100">بررسی پیام‌های داخلی</p>
                                                <span class="text-xs text-gray-500 dark:text-gray-400">۳ پیام خوانده نشده</span>
                                            </div>
                                            <span class="text-xs font-semibold px-2 py-0.5 bg-yellow-100 text-yellow-700 dark:bg-yellow-800 dark:text-yellow-200 rounded-full">در حال انجام</span>
                                        </div>
                                    </div>
                                </div>
                                <!-- خلاصه دیروز -->
                                <div class="card">
                                    <h3 class="font-semibold mb-2">خلاصه عملکرد دیروز</h3>
                                    <p class="text-sm text-gray-600 dark:text-gray-300">
                                        شما دیروز <strong>۷ ساعت و ۱۵ دقیقه</strong> فعال بودید و <strong>۴ تسک</strong> را به اتمام رساندید. بهره‌وری شما <strong>۸۹٪</strong> محاسبه شد.
                                    </p>
                                </div>
                            </div>
                            <!-- ستون کناری کارمند -->
                            <div class="space-y-4">
                                <!-- نمودار پیشرفت شخصی -->
                                <div class="card text-center">
                                    <h3 class="font-semibold mb-3">پیشرفت اهداف ماهانه</h3>
                                    <canvas id="employeeProgressChart" style="max-height: 150px;"></canvas>
                                    <p class="text-lg font-bold mt-2">۷۸٪</p>
                                </div>
                                <!-- نکته هوشمند -->
                                <div class="ai-insight-box card !p-4">
                                    <p class="text-sm font-semibold text-teal-800 dark:text-teal-100">نکته هوشمند</p>
                                    <p class="text-sm text-gray-700 dark:text-gray-200 mt-1">
                                        پیشنهاد: تسک «گزارش مالی» را به بعد از ظهر موکول کنید. تحلیل AI نشان می‌دهد تمرکز شما در آن ساعات بالاتر است.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div> <!-- انتهای dashboardContent -->

                <!-- 2. محتوای گزارش‌ها -->
                <div id="reportsContent" class="page-view hidden space-y-5">
                    <!-- Admin View -->
                    <div class="admin-view space-y-4">
                        <div class="flex flex-col md:flex-row justify-between items-center gap-3">
                            <div class="flex gap-2">
                                <button type="button" class="filter-btn active">هفتگی</button>
                                <button type="button" class="filter-btn">ماهانه</button>
                                <button type="button" class="filter-btn">سفارشی</button>
                            </div>
                            <div class="flex gap-2">
                                <button type="button" class="btn btn-primary btn-xs">PDF</button>
                                <button type="button" class="btn btn-primary btn-xs">Excel</button>
                            </div>
                        </div>
                        <div class="ai-insight-box card !p-4">
                            <p class="text-sm font-semibold text-teal-800 dark:text-teal-100">خلاصه هوشمند</p>
                            <p class="text-sm text-gray-700 dark:text-gray-200 mt-1">
                                بهره‌وری تیم تحقیق و توسعه (R&D) در هفته گذشته ۱۵٪ افزایش یافته است که عمدتاً به دلیل تکمیل فاز اول پروژه «نوآوران» می‌باشد.
                            </p>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                            <div class="card">
                                <h3 class="font-semibold mb-2 text-sm">بهره‌وری تیم‌ها (میله‌ای)</h3>
                                <canvas id="reportTeamProdChart" style="max-height: 200px;"></canvas>
                            </div>
                            <div class="card">
                                <h3 class="font-semibold mb-2 text-sm">روند حضور و غیاب (خطی)</h3>
                                <canvas id="reportAttendanceChart" style="max-height: 200px;"></canvas>
                            </div>
                            <div class="card">
                                <h3 class="font-semibold mb-2 text-sm">انواع خروجی‌ها (دایره‌ای)</h3>
                                <canvas id="reportOutputChart" style="max-height: 200px;"></canvas>
                            </div>
                        </div>
                    </div>
                    <!-- Employee View -->
                    <div class="employee-view space-y-4">
                        <h3 class="font-semibold text-lg">گزارش عملکرد شخصی شما</h3>
                        <div class="ai-insight-box card !p-4">
                            <p class="text-sm font-semibold text-teal-800 dark:text-teal-100">بازخورد هوشمند</p>
                            <p class="text-sm text-gray-700 dark:text-gray-200 mt-1">
                                <strong>نقاط قوت:</strong> دقت بالا در انجام تسک‌های محاسباتی و تحویل به موقع گزارش‌ها.
                                <br>
                                <strong>نقاط بهبود:</strong> زمان پاسخگویی در چت‌های تیمی کمی کندتر از میانگین است.
                            </p>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="card">
                                <h3 class="font-semibold mb-2 text-sm">فعالیت هفتگی شما (خطی)</h3>
                                <canvas id="reportEmployeeWeeklyChart" style="max-height: 200px;"></canvas>
                            </div>
                            <div class="card">
                                <h3 class="font-semibold mb-2 text-sm">خلاصه عملکرد ماهانه</h3>
                                <ul class="space-y-2 text-sm mt-4">
                                    <li class="flex justify-between"><span>تسک‌های انجام شده:</span> <span class="font-bold">۵۶</span></li>
                                    <li class="flex justify-between"><span>میانگین بهره‌وری:</span> <span class="font-bold text-green-500">۹۱٪</span></li>
                                    <li class="flex justify-between"><span>تأخیرها:</span> <span class="font-bold text-red-500">۱</span></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div> <!-- انتهای reportsContent -->

                <!-- 3. محتوای تنظیمات -->
                <div id="settingsContent" class="page-view hidden space-y-5">
                    <!-- Admin View -->
                    <div class="admin-view space-y-4">
                        <h3 class="font-semibold text-lg">تنظیمات سازمان</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <!-- مدیریت نقش‌ها -->
                            <div class="card">
                                <h4 class="font-semibold mb-3">مدیریت نقش‌ها و دسترسی</h4>
                                <div class="space-y-2">
                                    <div class="flex justify-between items-center p-2 bg-gray-50 dark:bg-gray-800 rounded">
                                        <span class="text-sm font-medium">تحلیل‌گر داده</span>
                                        <div class="flex gap-1">
                                            <button type="button" class="filter-btn text-xs active">پروژه‌ها</button>
                                            <button type="button" class="filter-btn text-xs">گزارش‌ها</button>
                                        </div>
                                    </div>
                                    <div class="flex justify-between items-center p-2 bg-gray-50 dark:bg-gray-800 rounded">
                                        <span class="text-sm font-medium">مدیر پروژه</span>
                                        <div class="flex gap-1">
                                            <button type="button" class="filter-btn text-xs active">تیم‌سازی</button>
                                            <button type="button" class="filter-btn text-xs active">قراردادها</button>
                                        </div>
                                    </div>
                                </div>
                                <button type="button" class="btn btn-primary btn-xs mt-4">افزودن نقش</button>
                            </div>
                            <!-- تنظیمات عمومی -->
                            <div class="card">
                                <h4 class="font-semibold mb-3">تنظیمات عمومی</h4>
                                <div class="space-y-3">
                                    <div class="flex items-center justify-between">
                                        <label for="orgName" class="text-sm flex-shrink-0 mr-2">نام سازمان:</label>
                                        <input type="text" id="orgName" class="w-2/3" value="پارک علم و فناوری">
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <span class="text-sm">فعال‌سازی اعلان‌های هوشمند:</span>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                          <input type="checkbox" value="" class="sr-only peer" checked>
                                          <div class="w-11 h-6 bg-gray-200 dark:bg-gray-700 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-brand-highlight"></div>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Employee View (ادغام شده با پروفایل) -->
                    <div class="employee-view space-y-4 card">
                        <p>برای تنظیمات شخصی به صفحه «پروفایل» (دکمه کنار نام شما در پایین سایدبار) مراجعه کنید.</p>
                    </div>
                </div> <!-- انتهای settingsContent -->

                <!-- 4. محتوای مدیریت تیم (فقط مدیر) -->
                <div id="teamContent" class="page-view hidden space-y-5 admin-view">
                    <div class="flex justify-between items-center">
                        <h3 class="font-semibold text-lg">مدیریت تیم‌ها</h3>
                        <button type="button" class="btn btn-highlight btn-sm">افزودن تیم جدید</button>
                    </div>
                    <div class="ai-insight-box card !p-4">
                        <p class="text-sm font-semibold text-teal-800 dark:text-teal-100">پیشنهاد هوشمند</p>
                        <p class="text-sm text-gray-700 dark:text-gray-200 mt-1">
                            تیم «پشتیبانی» با کمبود نیرو مواجه است. پیشنهاد می‌شود یک کارشناس از تیم «توسعه» به صورت موقت منتقل شود.
                        </p>
                    </div>
                    <div class="card">
                        <h4 class="font-semibold mb-3">ساختار تیم‌ها</h4>
                        <div class="space-y-3">
                            <!-- Team 1 -->
                            <div class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg">
                                <div>
                                    <p class="font-medium">تیم طراحی محصول (۵ عضو)</p>
                                    <span class="text-xs text-gray-500 dark:text-gray-400">مدیر: خانم احمدی</span>
                                </div>
                                <div class="text-left flex-shrink-0 w-32">
                                    <span class="font-semibold text-green-500 text-sm">۸۸٪ بهره‌وری</span>
                                    <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 mt-1"><div class="bg-green-500 h-1.5 rounded-full" style="width: 88%"></div></div>
                                </div>
                            </div>
                            <!-- Team 2 -->
                            <div class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg">
                                <div>
                                    <p class="font-medium">تیم فناوری و توسعه (۸ عضو)</p>
                                    <span class="text-xs text-gray-500 dark:text-gray-400">مدیر: آقای رضایی</span>
                                </div>
                                <div class="text-left flex-shrink-0 w-32">
                                    <span class="font-semibold text-green-500 text-sm">۹۲٪ بهره‌وری</span>
                                    <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 mt-1"><div class="bg-green-500 h-1.5 rounded-full" style="width: 92%"></div></div>
                                </div>
                            </div>
                            <!-- Team 3 -->
                            <div class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg">
                                <div>
                                    <p class="font-medium">تیم فروش و بازاریابی (۴ عضو)</p>
                                    <span class="text-xs text-gray-500 dark:text-gray-400">مدیر: آقای شریفی</span>
                                </div>
                                <div class="text-left flex-shrink-0 w-32">
                                    <span class="font-semibold text-red-500 text-sm">۶۵٪ بهره‌وری</span>
                                    <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 mt-1"><div class="bg-red-500 h-1.5 rounded-full" style="width: 65%"></div></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div> <!-- انتهای teamContent -->

                <!-- 5. محتوای قراردادها -->
                <div id="contractsContent" class="page-view hidden space-y-5">
                    <!-- Admin View -->
                    <div class="admin-view space-y-4">
                        <div class="flex justify-between items-center">
                            <h3 class="font-semibold text-lg">مدیریت قراردادها</h3>
                            <button type="button" class="btn btn-highlight btn-sm">ایجاد قرارداد هوشمند</button>
                        </div>
                        <div class="ai-insight-box card !p-4">
                            <p class="text-sm font-semibold text-teal-800 dark:text-teal-100">دستیار هوشمند</p>
                            <p class="text-sm text-gray-700 dark:text-gray-200 mt-1">
                                آیا مایلید یک قرارداد همکاری بر اساس پروپوزال تایید شده «پروژه آذرنو» آماده کنم؟
                                <button type="button" class="filter-btn text-xs active ml-2">بله، آماده کن</button>
                            </p>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <!-- در حال بررسی -->
                            <div class="card !p-4 border-t-4 border-yellow-500 rounded-t-none">
                                <h4 class="font-semibold mb-3 text-yellow-500">در حال بررسی (۳)</h4>
                                <div class="space-y-2">
                                    <p class="text-sm p-2 bg-gray-50 dark:bg-gray-800 rounded">قرارداد پروژه «ابرینو»</p>
                                    <p class="text-sm p-2 bg-gray-50 dark:bg-gray-800 rounded">تمدید قرارداد «تیم پشتیبانی»</p>
                                    <p class="text-sm p-2 bg-gray-50 dark:bg-gray-800 rounded">قرارداد «مشاوره مالی»</p>
                                </div>
                            </div>
                            <!-- تایید شده -->
                            <div class="card !p-4 border-t-4 border-blue-500 rounded-t-none">
                                <h4 class="font-semibold mb-3 text-blue-500">تایید شده (۲)</h4>
                                <div class="space-y-2">
                                    <p class="text-sm p-2 bg-gray-50 dark:bg-gray-800 rounded">قرارداد پروژه «آذرنو»</p>
                                    <p class="text-sm p-2 bg-gray-50 dark:bg-gray-800 rounded">قرارداد «خرید سرور»</p>
                                </div>
                            </div>
                            <!-- نهایی شده -->
                            <div class="card !p-4 border-t-4 border-green-500 rounded-t-none">
                                <h4 class="font-semibold mb-3 text-green-500">نهایی شده (۸)</h4>
                                <div class="space-y-2">
                                    <p class="text-sm p-2 bg-gray-50 dark:bg-gray-800 rounded">قرارداد «نوآوران»</p>
                                    <!-- Add more if needed -->
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Employee View -->
                    <div class="employee-view space-y-4">
                        <div class="flex justify-between items-center">
                            <h3 class="font-semibold text-lg">قراردادهای من</h3>
                            <button type="button" class="btn btn-primary btn-sm">درخواست قرارداد جدید</button>
                        </div>
                        <div class="card">
                            <div class="space-y-3">
                                <div class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg">
                                    <p class="font-medium">قرارداد پرسنلی (۱۴۰۳)</p>
                                    <span class="text-xs font-semibold px-2 py-0.5 bg-green-100 text-green-700 dark:bg-green-800 dark:text-green-200 rounded-full">نهایی شده</span>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg">
                                    <p class="font-medium">قرارداد محرمانگی (NDA) - پروژه آذرنو</p>
                                    <span class="text-xs font-semibold px-2 py-0.5 bg-yellow-100 text-yellow-700 dark:bg-yellow-800 dark:text-yellow-200 rounded-full">در حال بررسی</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div> <!-- انتهای contractsContent -->

                <!-- 6. محتوای آموزش هوشمند -->
                <div id="trainingContent" class="page-view hidden space-y-5">
                    <!-- Admin View -->
                    <div class="admin-view space-y-4">
                        <h3 class="font-semibold text-lg">وضعیت آموزش سازمانی</h3>
                        <div class="ai-insight-box card !p-4">
                            <p class="text-sm font-semibold text-teal-800 dark:text-teal-100">پیشنهاد هوشمند</p>
                            <p class="text-sm text-gray-700 dark:text-gray-200 mt-1">
                                بر اساس تحلیل عملکرد، تیم فروش در «مذاکره آنلاین» نیاز به تقویت دارد. پیشنهاد می‌شود دوره «تکنیک‌های فروش دیجیتال» فعال شود.
                            </p>
                            <button type="button" class="btn btn-highlight btn-xs mt-2">فعال‌سازی دوره</button>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="card">
                                <h3 class="font-semibold mb-2 text-sm">مشارکت تیم‌ها در دوره‌ها (میله‌ای)</h3>
                                <canvas id="trainingParticipationChart" style="max-height: 200px;"></canvas>
                            </div>
                            <div class="card">
                                <h3 class="font-semibold mb-2 text-sm">پیشرفت دوره‌های فعال</h3>
                                <div class="space-y-3 mt-4">
                                    <div>
                                        <div class="flex justify-between text-xs mb-1"><span class="font-medium">مدیریت زمان</span><span>۷۵٪</span></div>
                                        <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5"><div class="bg-blue-500 h-1.5 rounded-full" style="width: 75%"></div></div>
                                    </div>
                                    <div>
                                        <div class="flex justify-between text-xs mb-1"><span class="font-medium">اصول گزارش‌نویسی</span><span>۴۰٪</span></div>
                                        <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5"><div class="bg-blue-500 h-1.5 rounded-full" style="width: 40%"></div></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Employee View -->
                    <div class="employee-view space-y-4">
                        <h3 class="font-semibold text-lg">مسیر یادگیری شما</h3>
                        <div class="ai-insight-box card !p-4">
                            <p class="text-sm font-semibold text-teal-800 dark:text-teal-100">توصیه هوشمند</p>
                            <p class="text-sm text-gray-700 dark:text-gray-200 mt-1">
                                هوش مصنوعی تشخیص داد که مهارت شما در «گزارش‌نویسی حرفه‌ای» نیاز به بهبود دارد. دوره زیر به شما پیشنهاد می‌شود.
                            </p>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="card">
                                <h4 class="font-semibold mb-3">دوره‌های پیشنهادی</h4>
                                <div class="p-3 bg-gray-50 dark:bg-gray-800 rounded-lg">
                                    <p class="font-medium">گزارش‌نویسی حرفه‌ای در سازمان</p>
                                    <span class="text-xs text-gray-500 dark:text-gray-400">مدرس: دکتر شریفی | ۳ ساعت</span>
                                    <button type="button" class="btn btn-highlight btn-xs mt-2">شروع دوره</button>
                                </div>
                            </div>
                            <div class="card">
                                <h4 class="font-semibold mb-3">دوره‌های فعال شما</h4>
                                <div class="space-y-3">
                                    <div>
                                        <div class="flex justify-between text-xs mb-1"><span class="font-medium">مدیریت زمان</span><span>۸۰٪</span></div>
                                        <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5"><div class="bg-brand-highlight h-1.5 rounded-full" style="width: 80%"></div></div>
                                    </div>
                                    <div>
                                        <div class="flex justify-between text-xs mb-1"><span class="font-medium">اصول مذاکره</span><span>۲۰٪</span></div>
                                        <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5"><div class="bg-brand-highlight h-1.5 rounded-full" style="width: 20%"></div></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div> <!-- انتهای trainingContent -->

                <!-- 7. محتوای چت هوشمند -->
                <div id="chatContent" class="page-view hidden h-[calc(100vh-12rem)] flex flex-col card !p-0"> <!-- Adjusted height -->
                    <!-- کانتینر چت -->
                    <div class="flex-1 overflow-y-auto p-4 space-y-4">
                        <!-- پیام سیستم -->
                        <div class="flex justify-center">
                            <span class="text-xs text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-800 px-3 py-1 rounded-full">امروز، ساعت ۱۰:۳۰</span>
                        </div>

                        <!-- Admin View (دکمه‌های آماده) -->
                        <div class="admin-view space-y-2">
                             <p class="text-sm text-center text-gray-600 dark:text-gray-300">سلام، من دستیار هوشمند مدیریتی شما هستم. چگونه می‌توانم کمک کنم؟</p>
                             <div class="flex justify-center gap-2 flex-wrap">
                                 <button type="button" class="filter-btn text-xs bg-gray-100 dark:bg-gray-800">چگونه بهره‌وری تیم IT را افزایش دهم؟</button>
                                 <button type="button" class="filter-btn text-xs bg-gray-100 dark:bg-gray-800">کدام پروژه‌ها بالاترین ROI را دارند؟</button>
                                 <button type="button" class="filter-btn text-xs bg-gray-100 dark:bg-gray-800">تحلیل ریسک پروژه آذرنو</button>
                             </div>
                        </div>

                        <!-- Employee View (مثال گفتگو) -->
                        <div class="employee-view space-y-4">
                            <!-- پیام کاربر -->
                            <div class="flex justify-start">
                                <div class="max-w-md p-3 bg-gray-100 dark:bg-gray-800 rounded-lg rounded-br-none">
                                    <p class="text-sm">سلام، لطفاً وضعیت پروژه آذرنو رو خلاصه کن.</p>
                                </div>
                            </div>
                            <!-- پیام AI -->
                            <div class="flex justify-end">
                                <div class="max-w-md p-3 bg-blue-100 dark:bg-blue-900 text-gray-900 dark:text-gray-100 rounded-lg rounded-bl-none">
                                    <p class="text-sm font-medium">سلام. حتماً.</p>
                                    <p class="text-sm mt-1">پروژه «آذرنو» در حال حاضر <strong>۸۰٪</strong> پیشرفت داشته و طبق زمان‌بندی است. فاز تست نهایی هفته آینده آغاز می‌شود. ریسک خاصی شناسایی نشده است.</p>
                                </div>
                            </div>
                            <!-- پیام کاربر -->
                            <div class="flex justify-start">
                                <div class="max-w-md p-3 bg-gray-100 dark:bg-gray-800 rounded-lg rounded-br-none">
                                    <p class="text-sm">چطور یک نامه رسمی درخواست مرخصی بنویسم؟</p>
                                </div>
                            </div>
                            <!-- پیام AI -->
                            <div class="flex justify-end">
                                <div class="max-w-md p-3 bg-blue-100 dark:bg-blue-900 text-gray-900 dark:text-gray-100 rounded-lg rounded-bl-none">
                                    <p class="text-sm">برای این کار می‌توانید از «نامه‌ساز هوشمند» در منوی کناری استفاده کنید. اما یک قالب ساده به این شکل است: <br> «با سلام و احترام، بدینوسیله اینجانب ... درخواست مرخصی خود را از تاریخ ... تا ... به مدت ... روز به دلیل ... اعلام می‌دارم. پیشاپیش از حسن توجه شما سپاسگزارم.»</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- ورودی چت -->
                    <div class="p-4 border-t border-gray-200 dark:border-gray-700 flex gap-2">
                        <input type="text" placeholder="پیام خود را بنویسید..." class="flex-1 w-full text-sm">
                        <button type="button" class="btn btn-highlight px-5">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" /></svg>
                        </button>
                    </div>
                </div> <!-- انتهای chatContent -->


                 <!-- 8. محتوای پروژه‌ها -->
                <div id="projectsContent" class="page-view hidden space-y-5">
                    <!-- Admin View -->
                    <div class="admin-view space-y-4">
                        <div class="flex justify-between items-center">
                            <h3 class="font-semibold text-lg">مدیریت پروژه‌ها</h3>
                            <button type="button" class="btn btn-highlight btn-sm">پروژه جدید</button>
                        </div>
                        <div class="ai-insight-box card !p-4">
                            <p class="text-sm font-semibold text-teal-800 dark:text-teal-100">هشدار هوشمند</p>
                            <p class="text-sm text-gray-700 dark:text-gray-200 mt-1">
                                پروژه «بهینه‌سازی فروش» (۲۰٪) با توجه به سرعت فعلی، <strong>۵ روز</strong> از برنامه عقب است. پیشنهاد می‌شود یک جلسه بازبینی مایل‌استون برگزار شود.
                            </p>
                        </div>
                        <div class="card">
                            <h4 class="font-semibold mb-3">نمودار گانت پروژه‌ها</h4>
                            <canvas id="projectGanttChart" style="max-height: 200px;"></canvas>
                        </div>
                         <!-- Add more project management tools like task lists, resource allocation etc. if needed -->
                    </div>
                    <!-- Employee View -->
                    <div class="employee-view space-y-4">
                        <div class="flex justify-between items-center">
                            <h3 class="font-semibold text-lg">پروژه‌های من</h3>
                            <button type="button" class="btn btn-primary btn-sm">پروژه شخصی جدید</button>
                        </div>
                        <div class="ai-insight-box card !p-4">
                            <p class="text-sm font-semibold text-teal-800 dark:text-teal-100">یادآور هوشمند</p>
                            <p class="text-sm text-gray-700 dark:text-gray-200 mt-1">
                                شما تسک «آپلود مستندات» را برای پروژه آذرنو دارید. فراموش نکنید فایل‌ها را بارگذاری کنید.
                            </p>
                        </div>
                        <div class="card">
                            <div class="space-y-4">
                                <!-- Project 1 -->
                                <div>
                                    <div class="flex justify-between items-center mb-1">
                                        <span class="font-semibold text-lg text-gray-800 dark:text-gray-100">پروژه آذرنو</span>
                                        <span class="text-sm font-bold text-green-500">۸۰٪</span>
                                    </div>
                                    <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5"><div class="bg-green-500 h-2.5 rounded-full" style="width: 80%"></div></div>
                                    <div class="flex gap-2 mt-3">
                                        <button type="button" class="btn btn-primary btn-xs">افزودن فایل</button>
                                        <button type="button" class="btn btn-primary btn-xs">افزودن یادداشت</button>
                                    </div>
                                </div>
                                <!-- Project 2 -->
                                <div>
                                    <div class="flex justify-between items-center mb-1">
                                        <span class="font-semibold text-lg text-gray-800 dark:text-gray-100">پروژه داخلی (گزارش‌ها)</span>
                                        <span class="text-sm font-bold text-green-500">۱۰۰٪</span>
                                    </div>
                                    <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5"><div class="bg-green-500 h-2.5 rounded-full" style="width: 100%"></div></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div> <!-- انتهای projectsContent -->

                 <!-- 9. محتوای اهداف و عملکرد -->
                <div id="goalsContent" class="page-view hidden space-y-5">
                    <!-- Admin View -->
                    <div class="admin-view space-y-4">
                        <h3 class="font-semibold text-lg">اهداف و عملکرد سازمان</h3>
                        <div class="ai-insight-box card !p-4">
                            <p class="text-sm font-semibold text-teal-800 dark:text-teal-100">توصیه هوشمند</p>
                            <p class="text-sm text-gray-700 dark:text-gray-200 mt-1">
                                تمرکز بر کاهش «زمان پاسخگویی پشتیبانی» (KPI-04) می‌تواند رضایت مشتریان را تا ۵٪ افزایش دهد. پیشنهاد می‌شود این KPI برای تیم پشتیبانی در اولویت قرار گیرد.
                            </p>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="card">
                                <h3 class="font-semibold mb-2 text-sm">نرخ تحقق اهداف (تیم‌ها)</h3>
                                <canvas id="goalsTeamCompletionChart" style="max-height: 200px;"></canvas>
                            </div>
                            <div class="card">
                                <h3 class="font-semibold mb-2 text-sm">خلاصه عملکرد ماهانه</h3>
                                <ul class="space-y-2 text-sm mt-4">
                                    <li class="flex justify-between"><span>KPI تعریف شده:</span> <span class="font-bold">۲۵</span></li>
                                    <li class="flex justify-between"><span>KPI تحقق یافته:</span> <span class="font-bold text-green-500">۱۸</span></li>
                                    <li class="flex justify-between"><span>نرخ تحقق کل:</span> <span class="font-bold text-brand-highlight">۷۲٪</span></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- Employee View -->
                    <div class="employee-view space-y-4">
                        <h3 class="font-semibold text-lg">اهداف شخصی من</h3>
                        <div class="ai-insight-box card !p-4">
                            <p class="text-sm font-semibold text-teal-800 dark:text-teal-100">بازخورد هوشمند</p>
                            <p class="text-sm text-gray-700 dark:text-gray-200 mt-1">
                                شما <strong>۷۵٪</strong> از اهداف این ماه خود را محقق کرده‌اید. عملکرد عالی در «دقت گزارش‌دهی»!
                            </p>
                        </div>
                        <div class="card">
                            <h4 class="font-semibold mb-3">لیست اهداف (KPIs)</h4>
                            <div class="space-y-4">
                                <div>
                                    <div class="flex justify-between text-sm mb-1"><span class="font-medium">KPI-01: دقت در گزارش‌دهی</span><span class="font-bold text-green-500">۹۸٪</span></div>
                                    <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2"><div class="bg-green-500 h-2 rounded-full" style="width: 98%"></div></div>
                                </div>
                                <div>
                                    <div class="flex justify-between text-sm mb-1"><span class="font-medium">KPI-02: تکمیل دوره‌های آموزشی</span><span class="font-bold text-yellow-500">۵۰٪</span></div>
                                    <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2"><div class="bg-yellow-500 h-2 rounded-full" style="width: 50%"></div></div>
                                </div>
                                <div>
                                    <div class="flex justify-between text-sm mb-1"><span class="font-medium">KPI-03: زمان پاسخگویی</span><span class="font-bold text-green-500">۹۰٪</span></div>
                                    <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2"><div class="bg-green-500 h-2 rounded-full" style="width: 90%"></div></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div> <!-- انتهای goalsContent -->

                <!-- 10. محتوای پروفایل (مشترک) -->
                <div id="profileView" class="page-view hidden space-y-5">
                    <h3 class="font-semibold text-lg">پروفایل و تنظیمات شخصی</h3>
                    <div class="card !p-6">
                        <div class="flex flex-col md:flex-row items-center gap-6">
                            <img id="profileImgBig" class="h-24 w-24 rounded-lg object-cover flex-shrink-0" src="https://placehold.co/200x200/14b8a6/white?text=A" alt="پروفایل">
                            <div class="flex-1 text-center md:text-right">
                                <h4 id="profileNameBig" class="text-xl font-bold">...</h4>
                                <p id="profileRoleBig" class="text-md text-brand-highlight">...</p>
                                <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">عضویت از: ۱۴۰۱/۰۲/۱۰</p>
                            </div>
                            <button type="button" class="btn btn-primary btn-sm">تغییر عکس پروفایل</button>
                        </div>
                        <hr class="my-6 border-gray-200 dark:border-gray-700">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <!-- تغییر رمز عبور -->
                            <div>
                                <h5 class="font-semibold mb-3">تغییر رمز عبور</h5>
                                <form class="space-y-3">
                                    <input type="password" placeholder="رمز عبور فعلی" class="w-full">
                                    <input type="password" placeholder="رمز عبور جدید" class="w-full">
                                    <button type="submit" class="btn btn-primary btn-xs">ثبت تغییرات</button>
                                </form>
                            </div>
                            <!-- تنظیمات اعلان‌ها -->
                            <div>
                                <h5 class="font-semibold mb-3">تنظیمات اعلان‌ها</h5>
                                <div class="space-y-3">
                                    <div class="flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-800 rounded">
                                        <span class="text-sm">اعلان‌های هوش مصنوعی</span>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                          <input type="checkbox" value="" class="sr-only peer" checked>
                                          <div class="w-11 h-6 bg-gray-200 dark:bg-gray-700 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-brand-highlight"></div>
                                        </label>
                                    </div>
                                    <div class="flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-800 rounded">
                                        <span class="text-sm">یادآور تسک‌ها</span>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                          <input type="checkbox" value="" class="sr-only peer" checked>
                                          <div class="w-11 h-6 bg-gray-200 dark:bg-gray-700 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-brand-highlight"></div>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div> <!-- انتهای profileView -->

                <!-- 11. محتوای پشتیبانی (مشترک) -->
                <div id="supportView" class="page-view hidden space-y-5">
                    <h3 class="font-semibold text-lg">پشتیبانی و راهنما</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="card !p-6">
                            <h4 class="font-semibold mb-3">ارسال تیکت جدید</h4>
                            <form class="space-y-4">
                                <div>
                                    <label class="text-xs font-medium block mb-1">موضوع</label>
                                    <input type="text" class="w-full" placeholder="مثلا: مشکل در ورود به چت">
                                </div>
                                <div>
                                    <label class="text-xs font-medium block mb-1">بخش</label>
                                    <div class="flex gap-2 mt-2">
                                        <button type="button" class="filter-btn text-xs active">فنی</button>
                                        <button type="button" class="filter-btn text-xs">مالی</button>
                                        <button type="button" class="filter-btn text-xs">آموزش</button>
                                    </div>
                                </div>
                                <div>
                                    <label class="text-xs font-medium block mb-1">توضیحات</label>
                                    <textarea rows="4" class="w-full" placeholder="مشکل خود را شرح دهید..."></textarea>
                                </div>
                                <button type="submit" class="btn btn-highlight btn-sm">ارسال تیکت</button>
                            </form>
                        </div>
                        <div class="card !p-6">
                            <h4 class="font-semibold mb-3">سوالات متداول (AI)</h4>
                            <div class="ai-insight-box !p-3">
                                <p class="text-sm font-semibold text-teal-800 dark:text-teal-100">دستیار راهنما</p>
                                <p class="text-sm text-gray-700 dark:text-gray-200 mt-1">
                                    می‌توانید سوالات خود در مورد نحوه کار با پنل را مستقیماً در «چت هوشمند» بپرسید.
                                </p>
                            </div>
                            <div class="space-y-3 mt-4">
                                <p class="text-sm p-3 bg-gray-50 dark:bg-gray-800 rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700">چگونه یک گزارش سفارشی بسازم؟</p>
                                <p class="text-sm p-3 bg-gray-50 dark:bg-gray-800 rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700">نحوه تعریف KPI برای کارمندان چگونه است؟</p>
                                <p class="text-sm p-3 bg-gray-50 dark:bg-gray-800 rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700">چطور تم پنل را عوض کنم؟</p>
                            </div>
                        </div>
                    </div>
                </div> <!-- انتهای supportView -->

                <!-- =============================== -->
                <!-- ماژول‌های تخصصی (۱۱ عدد) -->
                <!-- =============================== -->

                 <!-- 12. نامه‌ساز هوشمند -->
                <div id="letterMakerContent" class="page-view hidden space-y-5">
                    <h3 class="font-semibold text-lg">نامه‌ساز هوشمند</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- فرم تولید -->
                        <div class="card !p-6">
                            <h4 class="font-semibold mb-3">تولید نامه رسمی</h4>
                            <form id="letterForm" class="space-y-4">
                                <div>
                                    <label class="text-xs font-medium block mb-1">موضوع نامه (به زبان ساده):</label>
                                    <input type="text" id="letterPrompt" class="w-full" placeholder="مثال: درخواست مرخصی برای هفته آینده">
                                </div>
                                <div>
                                    <label class="text-xs font-medium block mb-1">گیرنده:</label>
                                    <input type="text" id="letterTo" class="w-full" placeholder="مثال: واحد منابع انسانی">
                                </div>
                                <div>
                                    <label class="text-xs font-medium block mb-1">لحن نامه:</label>
                                    <div class="flex gap-2 mt-2">
                                        <button type="button" data-tone="اداری و رسمی" class="tone-btn filter-btn text-xs active">اداری و رسمی</button>
                                        <button type="button" data-tone="صمیمانه" class="tone-btn filter-btn text-xs">صمیمانه</button>
                                        <button type="button" data-tone="انتقادی" class="tone-btn filter-btn text-xs">انتقادی</button>
                                    </div>
                                </div>
                                <button type="submit" class="btn btn-highlight btn-sm" id="generateLetterBtn">تولید نامه</button>
                            </form>
                        </div>
                        <!-- پیش‌نمایش -->
                        <div class="card !p-6">
                            <h4 class="font-semibold mb-3">پیش‌نمایش نامه</h4>
                            <div id="letterOutput" class="p-4 bg-gray-50 dark:bg-gray-800 rounded-lg min-h-[250px] text-sm leading-relaxed whitespace-pre-line border border-gray-200 dark:border-gray-700 overflow-auto">
بسمه تعالی

موضوع: درخواست مرخصی

جناب آقای/سرکار خانم [نام مدیر]
مدیریت محترم واحد [نام واحد]

با سلام و احترام،
بدینوسیله به استحضار می‌رساند، اینجانب [نام شما]، کارشناس واحد [واحد شما]، قصد دارم از تاریخ [تاریخ شروع] لغایت [تاریخ پایان] به مدت [تعداد] روز از مرخصی استحقاقی خود استفاده نمایم.
خواهشمند است در صورت موافقت، دستورات لازم را مبذول فرمایید.

پیشاپیش از حسن توجه و مساعدت حضرتعالی کمال تشکر را دارم.

با تجدید احترام،
[نام شما]
[تاریخ]
                            </div>
                            <button type="button" id="copyLetterBtn" class="btn btn-primary btn-xs mt-3">کپی متن</button>
                            <span id="copyStatus" class="text-xs text-green-600 dark:text-green-400 mr-2 hidden">کپی شد!</span>
                        </div>
                    </div>
                </div> <!-- انتهای letterMakerContent -->

                 <!-- 13. پروپوزال‌ساز -->
                <div id="proposalMakerContent" class="page-view hidden space-y-5">
                    <h3 class="font-semibold text-lg">پروپوزال‌ساز هوشمند</h3>
                    <div class="card !p-6">
                        <div class="ai-insight-box mb-4 !p-3">
                            <p class="text-sm font-semibold text-teal-800 dark:text-teal-100">دستیار پروپوزال</p>
                            <p class="text-sm text-gray-700 dark:text-gray-200 mt-1">
                                کافیست ایده اصلی پروژه را وارد کنید. هوش مصنوعی ساختار استاندارد شامل مقدمه، اهداف، روش اجرا، تایم‌لاین و بودجه پیشنهادی را برای شما تولید می‌کند.
                            </p>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <!-- ورودی -->
                            <form id="proposalForm" class="md:col-span-1 space-y-4">
                                <div>
                                    <label class="text-xs font-medium block mb-1">ایده اصلی پروژه</label>
                                    <textarea id="proposalIdea" rows="5" class="w-full" placeholder="مثال: راه‌اندازی سیستم بایگانی دیجیتال برای اسناد مالی..."></textarea>
                                </div>
                                <button type="submit" class="btn btn-highlight btn-sm w-full">تولید پروپوزال</button>
                            </form>
                            <!-- خروجی -->
                            <div class="md:col-span-2">
                                <label class="text-xs font-medium block mb-1">خروجی پروپوزال (قابل ویرایش)</label>
                                <div id="proposalOutput" class="w-full mt-1 text-sm p-4 rounded bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 min-h-[300px] overflow-auto">
                                    <h5 class="font-bold">۱. مقدمه و بیان مسئله:</h5>
                                    <p class="text-xs mb-2">(هوش مصنوعی بر اساس ایده شما این بخش را تکمیل می‌کند...)</p>
                                    <h5 class="font-bold">۲. اهداف پروژه:</h5>
                                    <p class="text-xs mb-2">(هوش مصنوعی اهداف کمی و کیفی را لیست می‌کند...)</p>
                                    <h5 class="font-bold">۳. روش اجرا و فازبندی:</h5>
                                    <p class="text-xs mb-2">(شامل فاز ۱: تحلیل، فاز ۲: اجرا، فاز ۳: تست...)</p>
                                    <h5 class="font-bold">۴. زمان‌بندی (تایم‌لاین):</h5>
                                     <p class="text-xs mb-2">(جدول یا نمودار گانت پیشنهادی...)</p>
                                     <h5 class="font-bold">۵. بودجه پیشنهادی:</h5>
                                     <p class="text-xs mb-2">(برآورد هزینه‌ها...)</p>
                                </div>
                                <button type="button" id="copyProposalBtn" class="btn btn-primary btn-xs mt-3">کپی متن پروپوزال</button>
                                <span id="copyProposalStatus" class="text-xs text-green-600 dark:text-green-400 mr-2 hidden">کپی شد!</span>
                            </div>
                        </div>
                    </div>
                </div> <!-- انتهای proposalMakerContent -->

                <!-- 14. تحلیل بهره‌وری -->
                <div id="productivityView" class="page-view hidden space-y-5 admin-view">
                    <h3 class="font-semibold text-lg">تحلیل پیشرفته بهره‌وری</h3>
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
                        <div class="card">
                            <h3 class="font-semibold text-sm mb-2">نقشه حرارتی فعالیت سازمان (Heatmap)</h3>
                             <div class="heatmap-grid">
                                 <!-- 7 ستون (روز هفته) * 5 ردیف (تیم) -->
                                 <div class="heatmap-cell bg-teal-100 dark:bg-teal-900"></div><div class="heatmap-cell bg-teal-300 dark:bg-teal-700"></div><div class="heatmap-cell bg-teal-500 dark:bg-teal-500"></div><div class="heatmap-cell bg-teal-400 dark:bg-teal-600"></div><div class="heatmap-cell bg-teal-200 dark:bg-teal-800"></div><div class="heatmap-cell bg-gray-200 dark:bg-gray-700"></div><div class="heatmap-cell bg-gray-200 dark:bg-gray-700"></div>
                                 <div class="heatmap-cell bg-teal-200 dark:bg-teal-800"></div><div class="heatmap-cell bg-teal-500 dark:bg-teal-500"></div><div class="heatmap-cell bg-teal-600 dark:bg-teal-400"></div><div class="heatmap-cell bg-teal-500 dark:bg-teal-500"></div><div class="heatmap-cell bg-teal-300 dark:bg-teal-700"></div><div class="heatmap-cell bg-gray-200 dark:bg-gray-700"></div><div class="heatmap-cell bg-gray-200 dark:bg-gray-700"></div>
                                 <div class="heatmap-cell bg-teal-300 dark:bg-teal-700"></div><div class="heatmap-cell bg-teal-600 dark:bg-teal-400"></div><div class="heatmap-cell bg-teal-700 dark:bg-teal-300"></div><div class="heatmap-cell bg-teal-600 dark:bg-teal-400"></div><div class="heatmap-cell bg-teal-400 dark:bg-teal-600"></div><div class="heatmap-cell bg-gray-200 dark:bg-gray-700"></div><div class="heatmap-cell bg-gray-200 dark:bg-gray-700"></div>
                                 <div class="heatmap-cell bg-teal-100 dark:bg-teal-900"></div><div class="heatmap-cell bg-teal-200 dark:bg-teal-800"></div><div class="heatmap-cell bg-teal-400 dark:bg-teal-600"></div><div class="heatmap-cell bg-teal-300 dark:bg-teal-700"></div><div class="heatmap-cell bg-teal-200 dark:bg-teal-800"></div><div class="heatmap-cell bg-gray-200 dark:bg-gray-700"></div><div class="heatmap-cell bg-gray-200 dark:bg-gray-700"></div>
                                 <div class="heatmap-cell bg-teal-500 dark:bg-teal-500"></div><div class="heatmap-cell bg-teal-600 dark:bg-teal-400"></div><div class="heatmap-cell bg-teal-700 dark:bg-teal-300"></div><div class="heatmap-cell bg-teal-500 dark:bg-teal-500"></div><div class="heatmap-cell bg-teal-300 dark:bg-teal-700"></div><div class="heatmap-cell bg-gray-200 dark:bg-gray-700"></div><div class="heatmap-cell bg-gray-200 dark:bg-gray-700"></div>
                             </div>
                        </div>
                        <div class="card">
                            <h3 class="font-semibold text-sm mb-2">نرخ فعالیت بر اساس ساعت (AI)</h3>
                            <canvas id="activityHourChart" style="max-height: 200px;"></canvas>
                        </div>
                    </div>
                </div> <!-- انتهای productivityView -->

                <!-- 15. نقشه‌راه -->
                <div id="roadmapView" class="page-view hidden space-y-5">
                    <h3 class="font-semibold text-lg">نقشه‌راه و مایل‌استون‌ها</h3>
                    <div class="ai-insight-box card !p-4">
                        <p class="text-sm font-semibold text-teal-800 dark:text-teal-100">تحلیل هوشمند</p>
                        <p class="text-sm text-gray-700 dark:text-gray-200 mt-1">
                            مایل‌استون «تست فاز ۱» پروژه آذرنو با موفقیت بسته شد. مایل‌استون بعدی «شروع فاز ۲» است. هوش مصنوعی پیشنهاد می‌کند این مایل‌استون به ۲ تسک کوچکتر تقسیم شود.
                        </p>
                    </div>
                    <!-- شبیه‌سازی تایم‌لاین -->
                    <div class="card !p-6 space-y-4">
                        <h4 class="font-semibold">پروژه: آذرنو</h4>
                        <!-- Milestone 1 -->
                        <div class="relative pl-8">
                            <div class="absolute right-0 top-0 h-full w-0.5 bg-gray-300 dark:bg-gray-700"></div>
                            <div class="absolute right-[-7px] top-1 h-4 w-4 rounded-full bg-green-500 border-4 border-white dark:border-gray-900"></div>
                            <p class="font-semibold text-green-500">مایل‌استون ۱: تحلیل و نیازسنجی (انجام شد)</p>
                            <p class="text-xs text-gray-500 dark:text-gray-400">تاریخ: ۱ الی ۱۵ مهر</p>
                        </div>
                        <!-- Milestone 2 -->
                        <div class="relative pl-8">
                            <div class="absolute right-0 h-full w-0.5 bg-gray-300 dark:bg-gray-700"></div>
                            <div class="absolute right-[-7px] top-1 h-4 w-4 rounded-full bg-blue-500 border-4 border-white dark:border-gray-900"></div>
                            <p class="font-semibold text-blue-500">مایل‌استون ۲: توسعه فاز اول (در حال انجام)</p>
                            <p class="text-xs text-gray-500 dark:text-gray-400">تاریخ: ۱۶ مهر الی ۱۵ آبان</p>
                        </div>
                        <!-- Milestone 3 -->
                        <div class="relative pl-8">
                             <!-- Line stops here, so remove h-full -->
                            <div class="absolute right-0 top-0 h-4 w-0.5 bg-gray-300 dark:bg-gray-700"></div>
                            <div class="absolute right-[-7px] top-1 h-4 w-4 rounded-full bg-gray-400 border-4 border-white dark:border-gray-900"></div>
                            <p class="font-semibold text-gray-400">مایل‌استون ۳: تست و بازبینی (آینده)</p>
                            <p class="text-xs text-gray-500 dark:text-gray-400">تاریخ: ۱۶ آبان الی ۳۰ آبان</p>
                        </div>
                    </div>
                </div> <!-- انتهای roadmapView -->

                <!-- 16. بهینه‌سازی فرآیند -->
                <div id="processView" class="page-view hidden space-y-5 admin-view">
                    <h3 class="font-semibold text-lg">بهینه‌سازی فرآیندهای سازمانی (AI)</h3>
                    <div class="card !p-6">
                        <h4 class="font-semibold mb-3">تحلیل گلوگاه‌ها (Bottlenecks)</h4>
                        <div class="ai-insight-box !p-3">
                            <p class="text-sm font-semibold text-teal-800 dark:text-teal-100">گزارش تحلیل فرآیند</p>
                            <p class="text-sm text-gray-700 dark:text-gray-200 mt-1">
                                <strong>گلوگاه شناسایی شد:</strong> فرآیند «تایید قراردادهای مالی» به طور میانگین <strong>۴ روز</strong> زمان می‌برد که ۲ روز بیشتر از حد مطلوب است.
                                <br>
                                <strong>علت:</strong> وابستگی به امضای فیزیکی مدیر مالی.
                                <br>
                                <strong>پیشنهاد هوشمند:</strong> تغییر فرآیند به «تایید دیجیتال دو مرحله‌ای» از طریق همین پنل.
                            </p>
                            <button type="button" class="btn btn-highlight btn-xs mt-3">اعمال فرآیند پیشنهادی</button>
                        </div>
                        <div class="mt-4">
                            <h5 class="text-sm font-semibold mb-2">فرآیند فعلی (شبیه‌سازی)</h5>
                            <div class="flex items-center text-xs flex-wrap gap-y-2"> <!-- Added flex-wrap -->
                                <span class="p-2 bg-gray-100 dark:bg-gray-800 rounded">ثبت اولیه</span>
                                <span class="mx-2 text-gray-400 dark:text-gray-500">→ (۱ روز) →</span>
                                <span class="p-2 bg-red-100 dark:bg-red-900 rounded text-red-700 dark:text-red-200">تایید مدیر مالی (۴ روز)</span>
                                <span class="mx-2 text-gray-400 dark:text-gray-500">→ (۱ روز) →</span>
                                <span class="p-2 bg-gray-100 dark:bg-gray-800 rounded">بایگانی</span>
                            </div>
                        </div>
                    </div>
                </div> <!-- انتهای processView -->

                <!-- 17. پیام‌ساز هوشمند -->
                <div id="messageMakerView" class="page-view hidden space-y-5">
                    <h3 class="font-semibold text-lg">پیام‌ساز و اطلاع‌رسانی هوشمند</h3>
                    <div class="card !p-6">
                        <h4 class="font-semibold mb-3">تولید پیام رسمی/داخلی</h4>
                        <form id="messageForm" class="space-y-4">
                            <div>
                                <label class="text-xs font-medium block mb-1">موضوع پیام (به زبان ساده):</label>
                                <input type="text" id="messageSubject" class="w-full" placeholder="مثال: تبریک هفته پژوهش به همه کارمندان">
                            </div>
                            <div>
                                <label class="text-xs font-medium block mb-1">مخاطب:</label>
                                <div class="flex gap-2 mt-2 flex-wrap"> <!-- Added flex-wrap -->
                                    <button type="button" data-audience="همه سازمان" class="audience-btn filter-btn text-xs active">همه سازمان</button>
                                    <button type="button" data-audience="تیم فناوری" class="audience-btn filter-btn text-xs">تیم فناوری</button>
                                    <button type="button" data-audience="مدیران" class="audience-btn filter-btn text-xs">مدیران</button>
                                    <button type="button" data-audience="تیم فروش" class="audience-btn filter-btn text-xs">تیم فروش</button>
                                </div>
                            </div>
                            <button type="submit" class="btn btn-highlight btn-sm">تولید متن پیام</button>
                            <label class="text-xs font-medium block mb-1 mt-3">پیش‌نمایش پیام:</label>
                            <div id="messageOutput" class="p-4 bg-gray-50 dark:bg-gray-800 rounded-lg min-h-[150px] text-sm leading-relaxed border border-gray-200 dark:border-gray-700 overflow-auto">
                                (متن تولید شده توسط هوش مصنوعی در اینجا نمایش داده می‌شود...)
                            </div>
                             <button type="button" id="copyMessageBtn" class="btn btn-primary btn-xs mt-3">کپی متن پیام</button>
                             <span id="copyMessageStatus" class="text-xs text-green-600 dark:text-green-400 mr-2 hidden">کپی شد!</span>
                        </form>
                    </div>
                </div> <!-- انتهای messageMakerView -->

                <!-- 18. ترجمه هوشمند -->
                <div id="translateView" class="page-view hidden space-y-5">
                    <h3 class="font-semibold text-lg">ترجمه هوشمند (متن و تصویر)</h3>
                    <div class="card !p-6">
                        <div class="flex gap-4 items-center justify-center mb-4 border-b border-gray-200 dark:border-gray-700 pb-3">
                            <button type="button" id="translateTextBtn" class="translate-mode-btn filter-btn text-sm px-4 active">ترجمه متن</button>
                            <button type="button" id="translateImageBtn" class="translate-mode-btn filter-btn text-sm px-4">ترجمه تصویر (OCR)</button>
                        </div>
                        <!-- Translate Text View -->
                        <div id="translateTextView" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <!-- متن مبدا -->
                            <div>
                                <div class="flex justify-between items-center mb-2">
                                    <label class="text-xs font-medium">فارسی</label>
                                    <button type="button" title="شنیدن متن" class="p-1 text-gray-500 dark:text-gray-400 hover:text-brand-highlight">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l9 7.5-9-7.5" /></svg> <!-- Corrected Icon -->
                                    </button>
                                </div>
                                <textarea id="sourceText" rows="6" class="w-full" placeholder="متن خود را وارد کنید یا بچسبانید..."></textarea>
                                <button type="button" id="performTranslationBtn" class="btn btn-highlight btn-sm mt-2">ترجمه کن</button>
                            </div>
                            <!-- متن مقصد -->
                            <div>
                                <label class="text-xs font-medium">انگلیسی</label>
                                <div id="targetTextOutput" class="w-full mt-1 text-sm p-3 rounded bg-gray-100 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 min-h-[148px] overflow-auto">
                                    (Translation will appear here...)
                                </div>
                                <button type="button" id="copyTranslationBtn" class="btn btn-primary btn-xs mt-3">کپی ترجمه</button>
                                <span id="copyTranslateStatus" class="text-xs text-green-600 dark:text-green-400 mr-2 hidden">کپی شد!</span>
                            </div>
                        </div>
                        <!-- Translate Image View -->
                        <div id="translateImageView" class="hidden text-center space-y-4">
                            <label for="imageUpload" class="cursor-pointer inline-block p-6 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg hover:border-brand-highlight dark:hover:border-brand-highlight">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 mx-auto text-gray-400 dark:text-gray-500" fill="none" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z" />
                                </svg>
                                <p class="mt-2 text-sm text-gray-500 dark:text-gray-400">برای بارگذاری تصویر کلیک کنید یا تصویر را بکشید</p>
                                <input id="imageUpload" type="file" accept="image/*" class="hidden">
                            </label>
                            <p id="imageFileName" class="text-xs text-gray-500 dark:text-gray-400"></p>
                             <div id="imageOcrResult" class="text-sm text-left p-3 rounded bg-gray-100 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 min-h-[100px] hidden">
                                (متن استخراج و ترجمه شده از تصویر در اینجا نمایش داده می‌شود...)
                            </div>
                        </div>
                    </div>
                </div> <!-- انتهای translateView -->


                <!-- 19. چت سازمانی -->
                <div id="teamChatView" class="page-view hidden h-[calc(100vh-12rem)] md:flex card !p-0 overflow-hidden"> <!-- Adjusted height & style -->
                    <!-- لیست مخاطبین -->
                    <div class="w-1/3 lg:w-1/4 border-l border-gray-200 dark:border-gray-700 flex flex-col">
                        <div class="p-4 border-b border-gray-200 dark:border-gray-700 flex-shrink-0">
                            <input type="text" placeholder="جستجوی همکار..." class="w-full text-xs">
                        </div>
                        <div class="flex-1 overflow-y-auto">
                            <!-- Contact 1 (Active) -->
                            <div class="flex items-center p-3 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 cursor-pointer">
                                <img class="h-9 w-9 rounded-lg flex-shrink-0" src="https://placehold.co/100x100/3b82f6/white?text=R" alt="">
                                <div class="mr-3 flex-1 min-w-0">
                                    <p class="text-sm font-semibold truncate">آقای رضایی (مدیر)</p>
                                    <p class="text-xs text-gray-500 dark:text-gray-400 truncate">متشکرم، لطفا گزارش را ارسال کنید...</p>
                                </div>
                                <span class="text-xs text-white bg-brand-highlight rounded-full w-5 h-5 flex items-center justify-center flex-shrink-0">۲</span>
                            </div>
                            <!-- Contact 2 -->
                            <div class="flex items-center p-3 border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer">
                                <img class="h-9 w-9 rounded-lg flex-shrink-0" src="https://placehold.co/100x100/ec4899/white?text=A" alt="">
                                <div class="mr-3 flex-1 min-w-0">
                                    <p class="text-sm font-semibold truncate">خانم احمدی</p>
                                    <p class="text-xs text-gray-500 dark:text-gray-400 truncate">جلسه فردا ساعت ۱۰ تنظیم شد.</p>
                                </div>
                            </div>
                            <!-- Contact 3 -->
                            <div class="flex items-center p-3 border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer">
                                <span class="flex items-center justify-center h-9 w-9 rounded-lg bg-teal-100 dark:bg-teal-900 text-teal-600 dark:text-teal-300 font-bold text-sm flex-shrink-0">گروه</span>
                                <div class="mr-3 flex-1 min-w-0">
                                    <p class="text-sm font-semibold truncate">گروه پروژه آذرنو</p>
                                    <p class="text-xs text-gray-500 dark:text-gray-400 truncate">فایل نهایی بارگذاری شد.</p>
                                </div>
                            </div>
                             <!-- Add more contacts as needed -->
                        </div>
                    </div>
                    <!-- پنجره چت -->
                    <div class="flex-1 flex flex-col">
                        <!-- هدر چت -->
                        <div class="flex justify-between items-center p-3 border-b border-gray-200 dark:border-gray-700 flex-shrink-0">
                            <p class="font-semibold">آقای رضایی (مدیر)</p>
                            <div class="flex gap-2">
                                <button type="button" class="btn btn-primary btn-xs">خلاصه‌سازی چت (AI)</button>
                                <button type="button" class="btn btn-primary btn-xs">ایجاد یادآور (AI)</button>
                            </div>
                        </div>
                        <!-- پیام‌ها -->
                        <div class="flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50 dark:bg-gray-800/30"> <!-- Light background for chat area -->
                            <!-- پیام (خودم) -->
                            <div class="flex justify-start">
                                <div class="max-w-md p-3 bg-white dark:bg-gray-700 rounded-lg rounded-br-none shadow-sm border border-gray-100 dark:border-gray-600">
                                    <p class="text-sm">سلام آقای رضایی، گزارش اولیه آماده شد.</p>
                                    <span class="text-xs text-gray-400 dark:text-gray-500 block text-left mt-1">۱۴:۳۰</span>
                                </div>
                            </div>
                            <!-- پیام (مخاطب) -->
                            <div class="flex justify-end">
                                <div class="max-w-md p-3 bg-blue-500 text-white rounded-lg rounded-bl-none shadow-sm">
                                    <p class="text-sm">متشکرم، لطفا گزارش را ارسال کنید تا بررسی شود.</p>
                                     <span class="text-xs text-blue-100 block text-right mt-1">۱۴:۳۲</span>
                                </div>
                            </div>
                             <!-- Add more messages -->
                        </div>
                        <!-- ورودی چت -->
                        <div class="p-3 border-t border-gray-200 dark:border-gray-700 flex gap-2 flex-shrink-0 bg-white dark:bg-gray-900">
                            <input type="text" placeholder="پیام خود را بنویسید..." class="flex-1 w-full text-sm">
                            <button type="button" class="btn btn-highlight px-4">ارسال</button>
                        </div>
                    </div>
                </div> <!-- انتهای teamChatView -->


            </div> <!-- انتهای pageContentContainer -->
        </main>
    </div>

    <!-- =============================== -->
    <!--         جاوا اسکریپت          -->
    <!-- =============================== -->
    <script type="module">
        document.addEventListener('DOMContentLoaded', () => {

            // --- تعریف متغیرهای سراسری ---
            window.currentUserRole = null; // 'admin' or 'employee'
            window.timeInterval = null;
            window.appCharts = {}; // مخزن نمودارها برای دسترسی و تخریب
            window.chartsInitialized = {}; // وضعیت اولیه هر صفحه (برای جلوگیری از تکرار)

            // --- انتخابگرهای DOM (Views & Containers) ---
            const loginView = document.getElementById('loginView');
            const mainAppView = document.getElementById('mainAppView');
            const pageContentContainer = document.getElementById('pageContentContainer');
            const pageViews = pageContentContainer.querySelectorAll('.page-view');

            // --- انتخابگرهای DOM (سایدبار و هدر) ---
            const sidebarNav = document.getElementById('sidebarNav');
            const sidebarLinks = sidebarNav.querySelectorAll('.sidebar-link');
            const profileButtonInSidebar = document.querySelector('[data-target="profileView"]'); // Select profile button specifically
            const pageTitle = document.getElementById('pageTitle');
            const welcomeMessage = document.getElementById('welcomeMessage');
            const logoutButton = document.getElementById('logoutButton');
            const headerDate = document.getElementById('headerDate');
            const headerTime = document.getElementById('headerTime');
            const adminOnlyLinks = document.querySelectorAll('.admin-only');

            // --- عناصر پروفایل (برای به‌روزرسانی) ---
            const profileImg = document.getElementById('profileImg');
            const profileName = document.getElementById('profileName');
            const profileRole = document.getElementById('profileRole');
            const profileImgBig = document.getElementById('profileImgBig');
            const profileNameBig = document.getElementById('profileNameBig');
            const profileRoleBig = document.getElementById('profileRoleBig');

            // --- عناصر تغییر تم ---
            const themeToggleBtn = document.getElementById('theme-toggle');
            const themeToggleDarkIcon = document.getElementById('theme-toggle-dark-icon');
            const themeToggleLightIcon = document.getElementById('theme-toggle-light-icon');

             // --- عناصر ماژول نامه‌ساز ---
            const letterForm = document.getElementById('letterForm');
            const letterPrompt = document.getElementById('letterPrompt');
            const letterTo = document.getElementById('letterTo');
            const letterOutput = document.getElementById('letterOutput');
            const copyLetterBtn = document.getElementById('copyLetterBtn');
            const copyStatus = document.getElementById('copyStatus');
            const toneButtons = document.querySelectorAll('#letterForm .tone-btn');

             // --- عناصر ماژول پروپوزال‌ساز ---
            const proposalForm = document.getElementById('proposalForm');
            const proposalIdea = document.getElementById('proposalIdea');
            const proposalOutput = document.getElementById('proposalOutput');
            const copyProposalBtn = document.getElementById('copyProposalBtn');
            const copyProposalStatus = document.getElementById('copyProposalStatus');

            // --- عناصر ماژول پیام‌ساز ---
            const messageForm = document.getElementById('messageForm');
            const messageSubject = document.getElementById('messageSubject');
            const messageOutput = document.getElementById('messageOutput');
            const copyMessageBtn = document.getElementById('copyMessageBtn');
            const copyMessageStatus = document.getElementById('copyMessageStatus');
            const audienceButtons = document.querySelectorAll('#messageForm .audience-btn');

             // --- عناصر ماژول ترجمه ---
            const translateTextBtn = document.getElementById('translateTextBtn');
            const translateImageBtn = document.getElementById('translateImageBtn');
            const translateTextView = document.getElementById('translateTextView');
            const translateImageView = document.getElementById('translateImageView');
            const sourceText = document.getElementById('sourceText');
            const targetTextOutput = document.getElementById('targetTextOutput');
            const performTranslationBtn = document.getElementById('performTranslationBtn');
            const copyTranslationBtn = document.getElementById('copyTranslationBtn');
            const copyTranslateStatus = document.getElementById('copyTranslateStatus');
            const imageUpload = document.getElementById('imageUpload');
            const imageFileName = document.getElementById('imageFileName');
            const imageOcrResult = document.getElementById('imageOcrResult');
            const translateModeButtons = document.querySelectorAll('.translate-mode-btn');


            // --- مدیریت ناوبری (Navigation) ---
            function navigateTo(targetId) {
                // 1. پنهان کردن همه‌ی صفحات
                pageViews.forEach(view => view.classList.add('hidden'));

                // 2. نمایش صفحه مورد نظر
                const targetView = document.getElementById(targetId);
                if (targetView) {
                    targetView.classList.remove('hidden');
                    targetView.classList.add('fade-in'); // Add fade-in animation

                    // 3. به‌روزرسانی عنوان صفحه
                    const targetLink = sidebarNav.querySelector(`[data-target="${targetId}"]`);
                    pageTitle.textContent = targetLink ? targetLink.textContent.trim() : "داشبورد"; // Default to Dashboard

                    // 4. به‌روزرسانی استایل لینک فعال
                    updateActiveLinkStyles(targetId);

                    // 5. راه‌اندازی نمودارهای صفحه (فقط یک بار یا اگر لازم باشد)
                    initializeChartsForView(targetId);

                     // Reset fade-in animation class after it completes
                    setTimeout(() => {
                        targetView.classList.remove('fade-in');
                    }, 500); // Match animation duration
                } else {
                    console.error(`Target view with ID "${targetId}" not found.`);
                    // Optionally navigate to a default view like dashboard
                    navigateTo('dashboardContent');
                }
            }

            function updateActiveLinkStyles(targetId) {
                // Include profile button in the logic
                [...sidebarLinks, profileButtonInSidebar].forEach(link => {
                    if (link && link.dataset.target) { // Check if link and dataset.target exist
                       link.classList.toggle('active', link.dataset.target === targetId);
                    }
                });
            }

             // --- افزودن Event Listener به لینک‌های سایدبار و دکمه پروفایل ---
            [...sidebarLinks, profileButtonInSidebar].forEach(link => {
                 if (link && link.dataset.target) { // Ensure link and target exist
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        const targetId = e.currentTarget.dataset.target;
                        navigateTo(targetId);
                    });
                 }
            });


            // --- مدیریت ورود (Login) ---
            document.querySelectorAll('.role-select-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const role = e.currentTarget.dataset.role;
                    login(role);
                });
            });

            function login(role) {
                window.currentUserRole = role; // ذخیره نقش کاربر

                loginView.classList.add('hidden');
                mainAppView.classList.remove('hidden');
                mainAppView.classList.add('flex', 'fade-in'); // Add fade-in

                setupDashboard(role);
                startClock(); // شروع آپدیت ساعت و تاریخ

                // Reset charts initialized status
                window.chartsInitialized = {};

                 // Remove fade-in after animation
                 setTimeout(() => mainAppView.classList.remove('fade-in'), 500);

                 // Navigate to dashboard after login and setup
                 navigateTo('dashboardContent');

            }

            // --- خروج (Logout) ---
            function logout() {
                loginView.classList.remove('hidden');
                 loginView.classList.add('fade-in'); // Fade in login view
                mainAppView.classList.add('hidden');
                mainAppView.classList.remove('flex');

                window.currentUserRole = null;

                // تخریب تمام نمودارهای فعال
                Object.values(window.appCharts).forEach(chart => {
                    if (chart && typeof chart.destroy === 'function') {
                        chart.destroy();
                    }
                });
                window.appCharts = {}; // Reset chart storage
                window.chartsInitialized = {}; // Reset initialization status

                stopClock(); // توقف آپدیت ساعت

                 // Remove fade-in after animation
                 setTimeout(() => loginView.classList.remove('fade-in'), 500);
            }

            logoutButton.addEventListener('click', logout);

            // --- تنظیم داشبورد بر اساس نقش ---
            function setupDashboard(role) {
                const isAdmin = (role === 'admin');
                const name = isAdmin ? 'دکتر رضایی' : 'خانم محمدی';
                const roleText = isAdmin ? 'مدیر ارشد' : 'کارشناس';
                const welcome = isAdmin ? `پنل مدیر ارشد، جناب ${name} خوش آمدید` : `پنل کاربری، ${name} خوش آمدید`;
                const imgSrc = isAdmin
                    ? `https://placehold.co/100x100/14b8a6/FFFFFF?text=${name.substring(0, 1)}`
                    : `https://placehold.co/100x100/3b82f6/FFFFFF?text=${name.substring(0, 1)}`;


                // به‌روزرسانی پروفایل
                profileImg.src = imgSrc;
                profileImg.alt = `پروفایل ${name}`;
                profileName.textContent = name;
                profileRole.textContent = roleText;
                profileImgBig.src = imgSrc; // Assuming large profile uses same initials/image logic
                profileImgBig.alt = `پروفایل ${name}`;
                profileNameBig.textContent = name;
                profileRoleBig.textContent = roleText;

                // پیام خوشامدگویی
                welcomeMessage.textContent = welcome;

                // پنهان/نمایش لینک‌ها و بخش‌های مخصوص مدیر
                adminOnlyLinks.forEach(link => {
                    link.style.display = isAdmin ? '' : 'none'; // Use style.display for hiding/showing
                });

                 // Toggle visibility of role-specific view containers ONCE during setup
                document.querySelectorAll('.admin-view').forEach(el => el.style.display = isAdmin ? '' : 'none');
                document.querySelectorAll('.employee-view').forEach(el => el.style.display = !isAdmin ? '' : 'none');
            }


            // --- مدیریت ساعت و تاریخ ---
            function startClock() {
                stopClock(); // Clear existing interval if any

                function setTime() {
                    const now = new Date();
                    try {
                        const persianDate = new Intl.DateTimeFormat('fa-IR-u-nu-latn', {
                            year: 'numeric', month: 'long', day: 'numeric', timeZone: 'Asia/Tehran' // Example timezone
                        }).format(now);

                        const time = new Intl.DateTimeFormat('fa-IR-u-nu-latn', {
                            hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false, timeZone: 'Asia/Tehran'
                        }).format(now);

                        if(headerDate) headerDate.textContent = persianDate;
                        if(headerTime) headerTime.textContent = `ساعت ${time}`;
                    } catch (e) {
                        console.error("Error formatting date/time:", e);
                        // Fallback to simpler format if Intl fails
                        if(headerDate) headerDate.textContent = now.toLocaleDateString('fa-IR');
                        if(headerTime) headerTime.textContent = now.toLocaleTimeString('fa-IR');
                        stopClock(); // Stop trying if there's a persistent error
                    }
                }

                setTime(); // Initial call
                window.timeInterval = setInterval(setTime, 1000); // Update every second
            }
             function stopClock() {
                if (window.timeInterval) {
                    clearInterval(window.timeInterval);
                    window.timeInterval = null;
                }
            }

            // --- مدیریت تم ---
            function updateThemeUI(isDark) {
                themeToggleLightIcon.classList.toggle('hidden', !isDark);
                themeToggleDarkIcon.classList.toggle('hidden', isDark);
            }

            function applyTheme(isDark) {
                document.documentElement.classList.toggle('dark', isDark);
                localStorage.setItem('color-theme', isDark ? 'dark' : 'light');
                updateThemeUI(isDark);
                updateAllChartsTheme(); // Update chart colors
            }

            // Initial Theme Setup
            const initialThemeDark = localStorage.getItem('color-theme') === 'dark' || (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches);
            applyTheme(initialThemeDark);

            themeToggleBtn.addEventListener('click', () => {
                applyTheme(!document.documentElement.classList.contains('dark'));
            });


            // --- راه‌اندازی نمودارها ---
            function getChartColors() {
                const isDarkMode = document.documentElement.classList.contains('dark');
                // Define colors with better contrast and variation
                return {
                    labelColor: isDarkMode ? '#9ca3af' : '#4b5563', // gray-400 / gray-600
                    gridColor: isDarkMode ? 'rgba(75, 85, 99, 0.3)' : 'rgba(229, 231, 235, 0.6)', // gray-600 / gray-200 with opacity
                    highlight: '#14b8a6', // teal-500
                    primary: '#3b82f6', // blue-500
                    secondary: '#a855f7', // purple-500
                    warning: '#f59e0b', // amber-500
                    danger: '#ef4444', // red-500
                    background1: isDarkMode ? '#374151' : '#e5e7eb', // gray-700 / gray-200 (for doughnut remaining part)
                    highlight pâle: 'rgba(20, 184, 166, 0.2)',
                    primaryPale: 'rgba(59, 130, 246, 0.2)',
                };
            }

            function destroyChart(chartId) {
                if (window.appCharts[chartId] && typeof window.appCharts[chartId].destroy === 'function') {
                    window.appCharts[chartId].destroy();
                    delete window.appCharts[chartId];
                }
            }

            function initializeChartsForView(viewId) {
                // Destroy previous charts of this view if they exist, to prevent memory leaks on re-navigation
                Object.keys(window.appCharts).forEach(key => {
                    if (key.startsWith(viewId)) { // Assuming chart IDs are prefixed like 'dashboard-trend'
                        destroyChart(key);
                    }
                });

                // Only initialize if not already done for this view
                if (!window.chartsInitialized[viewId]) {
                    switch(viewId) {
                        case 'dashboardContent': initDashboardCharts(); break;
                        case 'reportsContent': initReportsCharts(); break;
                        case 'goalsContent': initGoalsCharts(); break;
                        case 'trainingContent': initLearningCharts(); break;
                        case 'productivityView': initProductivityCharts(); break;
                        case 'projectsContent': initProjectPageCharts(); break; // Added for project page chart
                    }
                    window.chartsInitialized[viewId] = true;
                }
                 updateAllChartsTheme(); // Ensure colors are correct after initialization
            }


            function updateChartTheme(chartInstance, colors) {
                 if (!chartInstance || typeof chartInstance.update !== 'function') return;

                 const chartOptions = chartInstance.options;

                 // Scales (x, y for line/bar, r for radar)
                 if (chartOptions.scales) {
                     Object.keys(chartOptions.scales).forEach(axis => {
                         const scale = chartOptions.scales[axis];
                         if (scale.ticks) scale.ticks.color = colors.labelColor;
                         if (scale.grid) scale.grid.color = colors.gridColor;
                         // Specific for radar
                         if (axis === 'r') {
                             if (scale.pointLabels) scale.pointLabels.color = colors.labelColor;
                             if (scale.angleLines) scale.angleLines.color = colors.gridColor;
                         }
                     });
                 }

                 // Legend
                 if (chartOptions.plugins?.legend?.labels) {
                     chartOptions.plugins.legend.labels.color = colors.labelColor;
                 }
                // Title (especially for Doughnut)
                 if (chartOptions.plugins?.title?.display) {
                     chartOptions.plugins.title.color = colors.labelColor;
                 }

                 // Specific dataset updates (like doughnut background)
                  if (chartInstance.config.type === 'doughnut' || chartInstance.config.type === 'pie') {
                     chartInstance.data.datasets.forEach(dataset => {
                         // Example: Update the 'remaining' slice background
                         if (dataset.backgroundColor && dataset.backgroundColor.length > 1) {
                            // Assuming the last color is the background/remaining part
                            dataset.backgroundColor[dataset.backgroundColor.length - 1] = colors.background1;
                         }
                     });
                 }


                 chartInstance.update();
             }

            function updateAllChartsTheme() {
                 const colors = getChartColors();
                 Object.values(window.appCharts).forEach(chart => updateChartTheme(chart, colors));
             }

            // --- Chart Initialization Functions ---

            // 1. Dashboard Charts
            function initDashboardCharts() {
                const colors = getChartColors();

                // Employee Progress (Doughnut)
                destroyChart('dashboard-employeeProgress');
                const ctxEmployeeProgress = document.getElementById('employeeProgressChart')?.getContext('2d');
                if (ctxEmployeeProgress && !window.appCharts['dashboard-employeeProgress']) {
                    window.appCharts['dashboard-employeeProgress'] = new Chart(ctxEmployeeProgress, {
                        type: 'doughnut',
                        data: {
                            labels: ['تکمیل شده', 'باقی‌مانده'],
                            datasets: [{ data: [78, 22], backgroundColor: [colors.highlight, colors.background1], borderWidth: 0 }]
                        },
                        options: { responsive: true, maintainAspectRatio: false, cutout: '75%', plugins: { legend: { display: false } } }
                    });
                }

                // Admin Trend (Line)
                 destroyChart('dashboard-adminTrend');
                const ctxAdminTrend = document.getElementById('adminTrendChart')?.getContext('2d');
                if (ctxAdminTrend && !window.appCharts['dashboard-adminTrend']) {
                    window.appCharts['dashboard-adminTrend'] = new Chart(ctxAdminTrend, {
                        type: 'line',
                        data: {
                            labels: ['شنبه', '۱ش', '۲ش', '۳ش', '۴ش', '۵ش', 'جمعه'],
                            datasets: [
                                { label: 'کل سازمان', data: [80, 82, 85, 78, 88, 87, 86], borderColor: colors.highlight, tension: 0.3, fill: false, borderWidth: 2 },
                                { label: 'تیم‌ها', data: [70, 75, 72, 68, 78, 77, 75], borderColor: colors.secondary, tension: 0.3, fill: false, borderDash: [5, 5], borderWidth: 1.5 }
                            ]
                        },
                        options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { x: { ticks: { color: colors.labelColor, font: { size: 10 } }, grid: { drawOnChartArea: false, color: colors.gridColor } }, y: { ticks: { color: colors.labelColor, font: { size: 10 } }, grid: { color: colors.gridColor } } } }
                    });
                }

                // Admin Contracts (Pie)
                destroyChart('dashboard-adminContracts');
                const ctxAdminContracts = document.getElementById('adminContractsChart')?.getContext('2d');
                 if (ctxAdminContracts && !window.appCharts['dashboard-adminContracts']) {
                    window.appCharts['dashboard-adminContracts'] = new Chart(ctxAdminContracts, {
                        type: 'pie',
                        data: {
                            labels: ['نهایی‌شده', 'در حال بررسی', 'تأییدشده'], // Order matters for color consistency
                            datasets: [{ data: [12, 3, 8], backgroundColor: [colors.highlight, colors.warning, colors.primary], borderWidth: 0 }]
                        },
                        options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'bottom', align: 'center', labels: { color: colors.labelColor, usePointStyle: true, boxWidth: 8, padding: 10, font: { size: 10 } } } } }
                    });
                }

                 // Admin Radar
                 destroyChart('dashboard-adminRadar');
                 const ctxAdminRadar = document.getElementById('adminRadarChart')?.getContext('2d');
                 if (ctxAdminRadar && !window.appCharts['dashboard-adminRadar']) {
                    window.appCharts['dashboard-adminRadar'] = new Chart(ctxAdmin
